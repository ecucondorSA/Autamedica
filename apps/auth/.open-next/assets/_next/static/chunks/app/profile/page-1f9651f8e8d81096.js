(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{4590:(e,t,a)=>{Promise.resolve().then(a.bind(a,8847))},8847:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,dynamic:()=>i});var l=a(4296),s=a(3204),r=a(7301);let i="force-dynamic";function d(){let[e,t]=(0,s.useState)(null),[i,d]=(0,s.useState)([]),[o,c]=(0,s.useState)(!0),[n,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{let{ProfileManager:e}=await Promise.all([a.e(927),a.e(493),a.e(277)]).then(a.bind(a,2277)),t=e.browser();h(t),await b(t)})()},[]);let b=async e=>{if(e){c(!0);try{let[a,l]=await Promise.all([e.getCurrentProfile(),e.getAuditLog()]);a.success&&t(a.data),l.success&&d(l.data)}catch(e){r.vF.error("Error loading profile data:",e)}finally{c(!1)}}},p=async t=>{if(e&&x){m(!0);try{(await x.setPortalAndRole(t)).success&&await b(x)}catch(e){r.vF.error("Error updating portal:",e)}finally{m(!1)}}};return o?(0,l.jsx)("div",{className:"w-full max-w-4xl mx-auto",children:(0,l.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 p-8 shadow-2xl",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"}),(0,l.jsx)("p",{className:"text-white/70 mt-4",children:"Cargando perfil..."})]})})}):e?(0,l.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 p-8 shadow-2xl",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-white mb-6",children:"Perfil de Usuario"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Email"}),(0,l.jsx)("div",{className:"bg-white/5 rounded-lg p-3 text-white/70",children:e.email})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Nombre Completo"}),(0,l.jsx)("div",{className:"bg-white/5 rounded-lg p-3 text-white/70",children:e.full_name||"No especificado"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Rol Actual"}),(0,l.jsx)("div",{className:"bg-white/5 rounded-lg p-3",children:(0,l.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium ".concat("admin"===e.role?"bg-red-500/20 text-red-200":"doctor"===e.role?"bg-blue-500/20 text-blue-200":"company"===e.role?"bg-purple-500/20 text-purple-200":"bg-green-500/20 text-green-200"),children:"admin"===e.role?"Administrador":"doctor"===e.role?"M\xe9dico":"company"===e.role?"Empresa":"Paciente"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Portal Actual"}),(0,l.jsx)("div",{className:"bg-white/5 rounded-lg p-3",children:(0,l.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium ".concat("admin"===e.portal?"bg-red-500/20 text-red-200":"doctors"===e.portal?"bg-blue-500/20 text-blue-200":"companies"===e.portal?"bg-purple-500/20 text-purple-200":"bg-green-500/20 text-green-200"),children:"admin"===e.portal?"Administraci\xf3n":"doctors"===e.portal?"M\xe9dicos":"companies"===e.portal?"Empresas":"Pacientes"})})]})]}),(0,l.jsxs)("div",{className:"mt-8 pt-6 border-t border-white/20",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Cambiar Portal"}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["patients","doctors","companies","admin"].map(t=>(0,l.jsxs)("button",{onClick:()=>p(t),disabled:n||e.portal===t,className:"p-3 rounded-lg text-center transition-all ".concat(e.portal===t?"bg-autamedica-green/30 text-autamedica-light-green cursor-not-allowed":"bg-white/10 hover:bg-white/20 text-white hover:scale-105"," ").concat(n?"opacity-50 cursor-not-allowed":""),children:[(0,l.jsx)("div",{className:"text-lg mb-1",children:"patients"===t?"\uD83D\uDC64":"doctors"===t?"\uD83D\uDC68‍⚕️":"companies"===t?"\uD83C\uDFE2":"⚙️"}),(0,l.jsx)("div",{className:"text-sm font-medium",children:"patients"===t?"Pacientes":"doctors"===t?"M\xe9dicos":"companies"===t?"Empresas":"Admin"})]},t))})]})]}),(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 p-8 shadow-2xl",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Historial de Actividad"}),(0,l.jsx)("div",{className:"space-y-3",children:0===i.length?(0,l.jsx)("div",{className:"text-center py-8",children:(0,l.jsx)("p",{className:"text-white/60",children:"No hay actividad registrada"})}):i.map(e=>(0,l.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,l.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium ".concat("user_provisioned"===e.event?"bg-green-500/20 text-green-200":"role_changed"===e.event?"bg-blue-500/20 text-blue-200":"portal_changed"===e.event?"bg-purple-500/20 text-purple-200":"bg-gray-500/20 text-gray-200"),children:"user_provisioned"===e.event?"Usuario Creado":"role_changed"===e.event?"Rol Cambiado":"portal_changed"===e.event?"Portal Cambiado":e.event}),(0,l.jsx)("span",{className:"text-white/50 text-xs",children:new Date(e.created_at).toLocaleString("es-ES")})]}),(0,l.jsx)("div",{className:"text-white/70 text-sm",children:(0,l.jsx)("pre",{className:"whitespace-pre-wrap font-mono bg-black/20 p-2 rounded text-xs overflow-x-auto",children:JSON.stringify(e.data,null,2)})})]},e.id))})]})]}):(0,l.jsx)("div",{className:"w-full max-w-4xl mx-auto",children:(0,l.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 p-8 shadow-2xl",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Error"}),(0,l.jsx)("p",{className:"text-white/70",children:"No se pudo cargar el perfil del usuario."})]})})})}}},e=>{e.O(0,[67,301,356,702,358],()=>e(e.s=4590)),_N_E=e.O()}]);