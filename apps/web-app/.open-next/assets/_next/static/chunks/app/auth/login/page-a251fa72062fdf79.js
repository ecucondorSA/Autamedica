(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{3768:(e,a,r)=>{Promise.resolve().then(r.bind(r,6529)),Promise.resolve().then(r.t.bind(r,3788,23))},6529:(e,a,r)=>{"use strict";r.d(a,{LoginForm:()=>o});var t=r(5686),i=r(4406),s=r(5329),n=r(8157);function o(){let[e,a]=(0,i.useState)(""),[r,o]=(0,i.useState)(""),[l,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(null),u=(0,s.useRouter)(),h=(0,s.useSearchParams)(),p=function(){return(0,n.createBrowserClient)("https://gtyvdircfhmdjiaelqkg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4")}(),x=h.get("returnTo"),g=h.get("portal"),b=async a=>{a.preventDefault(),c(!0),m(null),!1;if(!p){m("Error de configuraci\xf3n. Por favor recarga la p\xe1gina."),c(!1);return}try{let{error:a}=await p.auth.signInWithPassword({email:e,password:r});if(a){a.message.includes("Invalid login credentials")?m("Credenciales incorrectas. Verifica tu email y contrase\xf1a."):m(a.message||"Error al iniciar sesi\xf3n"),c(!1);return}u.push("/")}catch(e){m("Error inesperado. Por favor intenta nuevamente."),c(!1)}},f=async()=>{if(!e)return void m("Por favor ingresa tu email para enviar el magic link");c(!0),m(null),!1;if(!p){m("Error de configuraci\xf3n. Por favor recarga la p\xe1gina."),c(!1);return}try{let a=(()=>{let e=new URL("/auth/callback",window.location.origin);return x&&e.searchParams.set("returnTo",x),g&&e.searchParams.set("portal",g),e})(),{error:r}=await p.auth.signInWithOtp({email:e,options:{emailRedirectTo:a.toString()}});if(r){m("Error al enviar magic link"),c(!1);return}alert("Magic link enviado! Revisa tu email."),c(!1)}catch(e){m("Error inesperado. Por favor intenta nuevamente."),c(!1)}};return(0,t.jsxs)(t.Fragment,{children:[d&&(0,t.jsx)("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,t.jsx)("p",{className:"text-red-400 text-sm",children:d})]})}),(0,t.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-white mb-2",children:"Email"}),(0,t.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>a(e.target.value),className:"w-full px-4 py-3 bg-autamedica-negro/20 border border-autamedica-secondary/30 rounded-lg text-autamedica-blanco placeholder-autamedica-text-light focus:outline-none focus:ring-2 focus:ring-autamedica-primary focus:border-transparent",placeholder:"tu@email.com",required:!0,disabled:l,autoComplete:"email",autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-white mb-2",children:"Contrase\xf1a"}),(0,t.jsx)("input",{type:"password",id:"password",value:r,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 bg-autamedica-negro/20 border border-autamedica-secondary/30 rounded-lg text-autamedica-blanco placeholder-autamedica-text-light focus:outline-none focus:ring-2 focus:ring-autamedica-primary focus:border-transparent",placeholder:"••••••••",required:!0,disabled:l,autoComplete:"current-password"})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-autamedica-primary to-autamedica-primary-dark text-white py-3 px-4 rounded-lg font-semibold hover:from-autamedica-primary-dark hover:to-autamedica-beige transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",disabled:l,children:l?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})]}),(0,t.jsxs)("div",{className:"my-6 flex items-center",children:[(0,t.jsx)("div",{className:"flex-1 border-t border-autamedica-secondary/30"}),(0,t.jsx)("span",{className:"px-4 text-autamedica-text-light text-sm",children:"o"}),(0,t.jsx)("div",{className:"flex-1 border-t border-autamedica-secondary/30"})]}),(0,t.jsxs)("button",{onClick:f,className:"w-full bg-autamedica-secondary/20 border border-autamedica-secondary/30 text-autamedica-blanco py-3 px-4 rounded-lg font-semibold hover:bg-autamedica-secondary/30 hover:border-autamedica-primary/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors transform hover:scale-105 disabled:transform-none flex items-center justify-center gap-2",disabled:l,children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),l?"Enviando...":"Enviar Magic Link"]}),(0,t.jsxs)("div",{className:"mt-6 text-center space-y-4",children:[(0,t.jsx)("a",{href:"/auth/forgot-password",className:"text-autamedica-primary hover:text-white text-sm font-medium transition-colors",children:"\xbfOlvidaste tu contrase\xf1a?"}),(0,t.jsxs)("div",{className:"text-autamedica-text-light text-sm",children:["\xbfNo tienes cuenta?"," ",(0,t.jsx)("a",{href:"/auth/register",className:"text-autamedica-primary hover:text-white font-medium transition-colors",children:"Crear cuenta"})]})]})]})}}},e=>{e.O(0,[11,157,964,108,670,358],()=>e(e.s=3768)),_N_E=e.O()}]);