(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2628:(e,t,s)=>{Promise.resolve().then(s.bind(s,5820))},5820:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Y});var a=s(8122),r=s(4050),n=s(7903),i=s(3715),l=s(6819),o=s(3826),c=s(4714),d=s(5509),m=s(471),h=s(9967),x=s(6235),u=s(2822),b=s(700),g=s(1984),p=s(6937),f=s(7464),w=s(3488),j=s(8893),v=s(8602),N=s(5287),y=s(8947);class S{on(e,t){return this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),()=>this.off(e,t)}once(e,t){let s=a=>{this.off(e,s),t(a)};return this.on(e,s)}off(e,t){var s,a;null==(s=this.listeners[e])||s.delete(t),(null==(a=this.listeners[e])?void 0:a.size)===0&&delete this.listeners[e]}emit(e,t){var s;null==(s=this.listeners[e])||s.forEach(e=>{try{e(t)}catch(e){console.error("[telemedicine] event listener error",e)}})}removeAllListeners(){this.listeners={}}constructor(){this.listeners={}}}class k extends S{get readyState(){var e,t;return null!=(t=null==(e=this.socket)?void 0:e.readyState)?t:null}async connect(){if(this.socket&&this.socket.readyState===WebSocket.OPEN)return;this.manualClose=!1;let e=new(function(){let e=globalThis.WebSocket;if(!e)throw Error("WebSocket API is not available in this environment");return e}())(function(e,t){if(!t)return e;try{let s=new URL(e);return s.searchParams.set("token",t),s.toString()}catch(a){let s=e.includes("?")?"&":"?";return"".concat(e).concat(s,"token=").concat(encodeURIComponent(t))}}(this.config.url,this.config.token),this.config.protocols);this.socket=e,await new Promise((t,s)=>{let a=()=>{this.emit("open",void 0),this.sendJoin(),t()},r=e=>{this.handleIncoming(e.data)},n=e=>{let t=e instanceof ErrorEvent&&e.error?e.error:Error("WebSocket error");this.emit("error",t),s(t)},i=t=>{e.removeEventListener("open",a),e.removeEventListener("message",r),e.removeEventListener("error",n),e.removeEventListener("close",i),this.emit("close",function(e){if(!e)return{code:1e3,reason:"",wasClean:!0};if("wasClean"in e){var t,s;return{code:null!=(t=e.code)?t:1e3,reason:null!=(s=e.reason)?s:"",wasClean:!!e.wasClean}}return{code:e.code,reason:e.reason,wasClean:e.wasClean}}(t)),this.scheduleReconnect()};e.addEventListener("open",a,{once:!0}),e.addEventListener("message",r),e.addEventListener("error",n,{once:!0}),e.addEventListener("close",i)})}disconnect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"client disconnect";this.manualClose=!0,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.close(e,t),this.socket=null}sendOffer(e,t){this.sendMessage({type:"offer",from:this.config.userId,roomId:this.config.roomId,to:t,data:e})}sendAnswer(e,t){this.sendMessage({type:"answer",from:this.config.userId,roomId:this.config.roomId,to:t,data:e})}sendIceCandidate(e,t){this.sendMessage({type:"ice-candidate",from:this.config.userId,roomId:this.config.roomId,to:t,data:e})}sendLeave(){this.sendMessage({type:"leave",from:this.config.userId,roomId:this.config.roomId})}sendJoin(){this.sendMessage({type:"join",from:this.config.userId,roomId:this.config.roomId,data:{userType:this.config.userType,metadata:this.config.metadata}})}sendMessage(e){if(!this.socket||this.socket.readyState!==WebSocket.OPEN)throw Error("WebSocket is not connected");this.socket.send(JSON.stringify(e))}handleIncoming(e){try{let t="string"==typeof e?e:new TextDecoder().decode(e),s=JSON.parse(t);switch(this.emit("message",s),s.type){case"user-joined":this.emit("user-joined",s);break;case"user-left":this.emit("user-left",s);break;case"offer":this.emit("offer",s);break;case"answer":this.emit("answer",s);break;case"ice-candidate":this.emit("ice-candidate",s);break;case"error":this.emit("error",Error("string"==typeof s.data?s.data:JSON.stringify(s.data)))}}catch(e){this.emit("error",e instanceof Error?e:Error(String(e)))}}scheduleReconnect(){var e;if(this.manualClose||!this.config.autoReconnect)return;this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=null!=(e=this.config.reconnectDelayMs)?e:1500;this.reconnectTimer=setTimeout(()=>{this.connect().catch(e=>{this.emit("error",e instanceof Error?e:Error(String(e))),this.scheduleReconnect()})},t)}getUserId(){return this.config.userId}getRoomId(){return this.config.roomId}getUserType(){return this.config.userType}constructor(e){super(),this.socket=null,this.reconnectTimer=null,this.manualClose=!1,this.config=e}}var C=s(6811),A=s(6811);function I(e){let{roomId:t,userId:s,userType:n,metadata:i,className:l}=e,{state:o,controls:c}=function(e){let[t,s]=(0,r.useState)({connectionState:"idle",participants:[],lastOffer:null,lastAnswer:null,lastCandidate:null,error:null}),a=(0,r.useRef)(null),n=(0,r.useMemo)(()=>{var t,s,a;return{url:null!=(s=null!=(t=e.signalingUrl)?t:C.env.NEXT_PUBLIC_SIGNALING_URL)?s:"ws://localhost:3005/signal",roomId:e.roomId,userId:e.userId,userType:e.userType,metadata:e.metadata,token:e.token,autoReconnect:null==(a=e.autoReconnect)||a}},[e.autoReconnect,e.metadata,e.roomId,e.signalingUrl,e.token,e.userId,e.userType]);return(0,r.useEffect)(()=>{let e=new k(n);a.current=e;let t=[e.on("open",()=>{s(e=>({...e,connectionState:"connected",error:null}))}),e.on("close",()=>{s(e=>({...e,connectionState:n.autoReconnect?"reconnecting":"disconnected"}))}),e.on("error",e=>{s(t=>({...t,error:e}))}),e.on("user-joined",e=>{s(t=>{var s,a,r,n;return{...t,participants:(r=t.participants,n={id:e.from,userType:null!=(a=null==(s=e.data)?void 0:s.userType)?a:"unknown"},r.find(e=>e.id===n.id)?r.map(e=>e.id===n.id?n:e):[...r,n])}})}),e.on("user-left",e=>{s(t=>({...t,participants:t.participants.filter(t=>t.id!==e.from)}))}),e.on("offer",e=>{s(t=>({...t,lastOffer:e}))}),e.on("answer",e=>{s(t=>({...t,lastAnswer:e}))}),e.on("ice-candidate",e=>{s(t=>({...t,lastCandidate:e}))})];return()=>{t.forEach(e=>e()),e.disconnect(),a.current=null}},[n]),{state:t,controls:{connect:async()=>{if(!a.current)throw Error("Telemedicine client not initialized");s(e=>({...e,connectionState:"connecting",error:null})),await a.current.connect()},disconnect:()=>{var e;null==(e=a.current)||e.disconnect(),s(e=>({...e,connectionState:"disconnected"}))},sendOffer:(e,t)=>{var s;null==(s=a.current)||s.sendOffer(e,t)},sendAnswer:(e,t)=>{var s;null==(s=a.current)||s.sendAnswer(e,t)},sendIceCandidate:(e,t)=>{var s;null==(s=a.current)||s.sendIceCandidate(e,t)},sendLeave:()=>{var e;null==(e=a.current)||e.sendLeave()}}}}({roomId:t,userId:s,userType:n,metadata:i,signalingUrl:(0,r.useMemo)(()=>{var e;return null!=(e=A.env.NEXT_PUBLIC_SIGNALING_URL)?e:"ws://localhost:3005/signal"},[])}),d=(0,r.useMemo)(()=>0===o.participants.length?"En espera de participantes":o.participants.map(e=>"".concat("doctor"===e.userType?"\uD83D\uDC68‍⚕️":"\uD83E\uDDD1‍⚕️"," ").concat(e.id)).join(", "),[o.participants]),m=function(e){switch(e){case"connected":return{label:"Conectado",color:"text-emerald-200",background:"bg-emerald-500/10"};case"connecting":return{label:"Conectando…",color:"text-blue-200",background:"bg-blue-500/10"};case"reconnecting":return{label:"Reconectando…",color:"text-yellow-200",background:"bg-yellow-500/10"};case"disconnected":return{label:"Desconectado",color:"text-slate-300",background:"bg-slate-600/20"};default:return{label:"Inactivo",color:"text-slate-300",background:"bg-slate-600/20"}}}(o.connectionState);return(0,a.jsxs)("div",{className:null!=l?l:"rounded-2xl border border-slate-800/60 bg-slate-900/70 p-4 shadow-lg shadow-slate-950/30",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-slate-100",children:"Conexi\xf3n de se\xf1alizaci\xf3n"}),(0,a.jsxs)("p",{className:"text-xs text-slate-400",children:["Sala actual: ",t]})]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 rounded-full px-2 py-1 text-xs font-semibold ".concat(m.background," ").concat(m.color),children:[(0,a.jsx)("span",{children:"●"}),m.label]})]}),(0,a.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,a.jsx)("button",{type:"button",className:"flex-1 rounded-lg bg-emerald-500 px-3 py-2 text-xs font-semibold text-slate-900 transition hover:bg-emerald-400",onClick:()=>{c.connect().catch(e=>console.error("[Telemedicina] error al conectar",e))},children:"Conectar"}),(0,a.jsx)("button",{type:"button",className:"flex-1 rounded-lg border border-slate-700 px-3 py-2 text-xs font-semibold text-slate-200 transition hover:bg-slate-800",onClick:()=>c.disconnect(),children:"Desconectar"})]}),(0,a.jsxs)("div",{className:"mt-3 space-y-2 text-xs text-slate-300",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-slate-200",children:"Participantes"}),(0,a.jsx)("p",{className:"text-slate-400",children:d})]}),o.lastOffer&&(0,a.jsxs)("div",{className:"rounded-md border border-blue-500/30 bg-blue-500/10 p-2",children:[(0,a.jsx)("p",{className:"font-semibold text-blue-200",children:"Oferta recibida"}),(0,a.jsxs)("p",{className:"text-[11px] text-blue-100",children:["De: ",o.lastOffer.from]})]}),o.lastAnswer&&(0,a.jsxs)("div",{className:"rounded-md border border-emerald-500/30 bg-emerald-500/10 p-2",children:[(0,a.jsx)("p",{className:"font-semibold text-emerald-200",children:"Respuesta recibida"}),(0,a.jsxs)("p",{className:"text-[11px] text-emerald-100",children:["De: ",o.lastAnswer.from]})]}),o.lastCandidate&&(0,a.jsxs)("div",{className:"rounded-md border border-purple-500/30 bg-purple-500/10 p-2",children:[(0,a.jsx)("p",{className:"font-semibold text-purple-200",children:"ICE candidate"}),(0,a.jsxs)("p",{className:"text-[11px] text-purple-100",children:["Origen: ",o.lastCandidate.from]})]}),o.error&&(0,a.jsxs)("div",{className:"rounded-md border border-rose-500/30 bg-rose-500/10 p-2 text-rose-200",children:["Error: ",o.error.message]})]})]})}var D=s(1677),T=s(6411);class E{subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notify(){this.listeners.forEach(e=>e(this.state))}getState(){return this.state}async addPersonalNote(e,t){let s={id:crypto.randomUUID(),type:"note",content:e,timestamp:new Date().toISOString(),patientId:t,isPrivate:!0};this.state.entries.push(s),this.state.personalNotes.push(e),this.state.lastSync=new Date().toISOString(),this.notify(),await this.syncWithBackend()}async recordSymptom(e,t,s){let a={id:crypto.randomUUID(),type:"symptom",content:e,metadata:{symptomSeverity:t},timestamp:new Date().toISOString(),patientId:s};this.state.entries.push(a),this.state.symptoms.push(a),this.state.lastSync=new Date().toISOString(),this.notify(),await this.syncWithBackend()}async recordMedicationTaken(e,t,s){let a={id:crypto.randomUUID(),type:"medication_taken",content:"Tom\xe9 ".concat(e),metadata:{medication:e,dosage:t,takenAt:new Date().toISOString()},timestamp:new Date().toISOString(),patientId:s};this.state.entries.push(a),this.state.medications.push(a),this.state.lastSync=new Date().toISOString(),this.notify(),await this.syncWithBackend()}async recordVitalSigns(e,t){let s={id:crypto.randomUUID(),type:"vital_sign",content:"Signos vitales registrados",metadata:{vitals:e},timestamp:new Date().toISOString(),patientId:t};this.state.entries.push(s),this.state.vitals.push(s),this.state.lastSync=new Date().toISOString(),this.notify(),await this.syncWithBackend()}getSymptomTrends(){return this.state.symptoms.slice(-7).reduce((e,t)=>{var s;let a=(null==(s=t.metadata)?void 0:s.symptomSeverity)||"leve";return e[a]=(e[a]||0)+1,e},{})}getMedicationAdherence(){var e;let t=this.state.medications.slice(-30),s=new Date(new Date().getTime()-2592e6),a=t.filter(e=>new Date(e.timestamp)>=s);return{totalTaken:a.length,adherenceScore:a.length>0?Math.min(100,a.length/30*100):0,lastTaken:(null==(e=a[a.length-1])?void 0:e.timestamp)||null}}getHealthSummary(){var e,t;this.getSymptomTrends();let s=this.getMedicationAdherence(),a=this.state.vitals.slice(-1)[0];return{symptomsCount:this.state.symptoms.length,lastSymptom:(null==(e=this.state.symptoms[this.state.symptoms.length-1])?void 0:e.content)||"Ninguno",medicationAdherence:s.adherenceScore,lastVitals:(null==a||null==(t=a.metadata)?void 0:t.vitals)||null,overallStatus:this.calculateOverallStatus()}}calculateOverallStatus(){let e=this.getSymptomTrends().severo||0,t=this.getMedicationAdherence();return e>0?"necesita_atencion":t.adherenceScore<50?"regular":t.adherenceScore>80?"excelente":"bueno"}async syncWithBackend(){this.state.isLoading=!0,this.notify();try{await new Promise(e=>setTimeout(e,300)),console.log("[Patient Medical Store] Synced with backend"),this.state.lastSync=new Date().toISOString()}catch(e){console.error("[Patient Medical Store] Sync failed:",e)}finally{this.state.isLoading=!1,this.notify()}}async generateMedicalSummaryForDoctor(){return{summary:this.getHealthSummary(),recentEntries:this.state.entries.slice(-10).filter(e=>!e.isPrivate),trends:this.getSymptomTrends(),medicationAdherence:this.getMedicationAdherence(),generatedAt:new Date().toISOString()}}async clearPrivateData(){this.state.personalNotes=[],this.state.entries=this.state.entries.filter(e=>!e.isPrivate),this.notify()}constructor(){this.state={entries:[],isLoading:!1,lastSync:null,personalNotes:[],symptoms:[],medications:[],vitals:[]},this.listeners=[]}}let M=new E;function O(){let[e,t]=(0,r.useState)(M.getState());return(0,r.useEffect)(()=>M.subscribe(t),[]),{...e,addPersonalNote:M.addPersonalNote.bind(M),recordSymptom:M.recordSymptom.bind(M),recordMedicationTaken:M.recordMedicationTaken.bind(M),recordVitalSigns:M.recordVitalSigns.bind(M),getHealthSummary:M.getHealthSummary.bind(M),generateMedicalSummaryForDoctor:M.generateMedicalSummaryForDoctor.bind(M)}}let R=[{id:"dolor-cabeza",name:"Dolor de cabeza",category:"neurologico",icon:(0,a.jsx)(f.A,{className:"h-4 w-4"}),description:"Cefalea, migra\xf1a o tensi\xf3n",defaultSeverity:"moderado"},{id:"fiebre",name:"Fiebre",category:"otro",icon:(0,a.jsx)(w.A,{className:"h-4 w-4"}),description:"Temperatura elevada",defaultSeverity:"moderado"},{id:"dolor-pecho",name:"Dolor en el pecho",category:"cardiovascular",icon:(0,a.jsx)(f.A,{className:"h-4 w-4"}),description:"Molestia o presi\xf3n tor\xe1cica",defaultSeverity:"severo"},{id:"dificultad-respirar",name:"Dificultad para respirar",category:"respiratorio",icon:(0,a.jsx)(d.A,{className:"h-4 w-4"}),description:"Disnea o falta de aire",defaultSeverity:"severo"},{id:"nauseas",name:"N\xe1useas/V\xf3mitos",category:"digestivo",icon:(0,a.jsx)(d.A,{className:"h-4 w-4"}),description:"Malestar estomacal",defaultSeverity:"moderado"},{id:"dolor-abdominal",name:"Dolor abdominal",category:"digestivo",icon:(0,a.jsx)(f.A,{className:"h-4 w-4"}),description:"Dolor o molestia en el abdomen",defaultSeverity:"moderado"}];function L(e){let{isOpen:t,onClose:s,patientId:n="current-patient"}=e,{recordSymptom:i,isLoading:l}=O(),[o,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(""),[h,x]=(0,r.useState)("moderado"),[u,b]=(0,r.useState)(""),[p,w]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),[N,y]=(0,r.useState)(!1),[S,k]=(0,r.useState)(!1),[C,A]=(0,r.useState)(!1);if(!t)return null;let I=async e=>{e.preventDefault();let t=C?d:null==o?void 0:o.name;if(t){y(!0);try{let e=[t,u&&"Duraci\xf3n: ".concat(u),p&&"Desencadenantes: ".concat(p),j&&"Notas: ".concat(j)].filter(Boolean).join(". ");await i(e,h,n),k(!0),setTimeout(()=>{k(!1),E()},2e3)}catch(e){console.error("Error recording symptom:",e)}finally{y(!1)}}},E=()=>{c(null),m(""),x("moderado"),b(""),w(""),v(""),A(!1),k(!1),s()};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl bg-black/80 backdrop-blur-sm rounded-2xl border border-white/20 shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-500/20 text-red-200",children:(0,a.jsx)(f.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Reportar S\xedntoma"}),(0,a.jsx)("p",{className:"text-xs text-white/70",children:"Registra tus s\xedntomas para tu equipo m\xe9dico"})]})]}),(0,a.jsx)("button",{onClick:E,className:"rounded-full p-2 text-white/60 hover:bg-white/10 hover:text-white transition",children:(0,a.jsx)(g.A,{className:"h-5 w-5"})})]}),S?(0,a.jsxs)("div",{className:"p-6 text-center space-y-4",children:[(0,a.jsx)("div",{className:"flex h-16 w-16 mx-auto items-center justify-center rounded-full bg-green-500/20 text-green-200",children:(0,a.jsx)(D.A,{className:"h-8 w-8"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"S\xedntoma Registrado"}),(0,a.jsx)("p",{className:"text-sm text-white/70",children:"Tu reporte ha sido enviado al equipo m\xe9dico"})]})]}):(0,a.jsxs)("form",{onSubmit:I,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-white",children:"Seleccionar S\xedntoma"}),(0,a.jsx)("button",{type:"button",onClick:()=>A(!C),className:"text-xs text-white/70 hover:text-white transition",children:C?"Usar plantillas":"S\xedntoma personalizado"})]}),C?(0,a.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"Describe tu s\xedntoma...",className:"w-full rounded-xl border border-white/20 bg-black/40 p-3 text-sm text-white placeholder:text-white/50 focus:border-white/40 focus:outline-none backdrop-blur-sm",required:!0}):(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:R.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>{c(e),x(e.defaultSeverity)},className:"p-3 rounded-lg border text-left transition ".concat((null==o?void 0:o.id)===e.id?"border-white/40 bg-white/10":"border-white/20 bg-white/5 hover:bg-white/10"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-white/70",children:e.icon}),(0,a.jsx)("span",{className:"text-sm font-medium text-white",children:e.name})]}),(0,a.jsx)("p",{className:"text-xs text-white/60",children:e.description})]},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-white",children:"Severidad"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:["leve","moderado","severo"].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>x(e),className:"p-3 rounded-lg border text-center transition ".concat(h===e?(e=>{switch(e){case"leve":return"border-green-500/50 bg-green-500/10 text-green-200";case"moderado":return"border-yellow-500/50 bg-yellow-500/10 text-yellow-200";case"severo":return"border-red-500/50 bg-red-500/10 text-red-200"}})(e):"border-white/20 bg-white/5 text-white/70 hover:bg-white/10"),children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:(e=>{switch(e){case"leve":return"\uD83D\uDFE2";case"moderado":return"\uD83D\uDFE1";case"severo":return"\uD83D\uDD34"}})(e)}),(0,a.jsx)("div",{className:"text-xs font-medium capitalize",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-white",children:"Duraci\xf3n"}),(0,a.jsx)("input",{type:"text",value:u,onChange:e=>b(e.target.value),placeholder:"ej: 2 horas, desde ayer...",className:"w-full rounded-xl border border-white/20 bg-black/40 p-3 text-sm text-white placeholder:text-white/50 focus:border-white/40 focus:outline-none backdrop-blur-sm"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-white",children:"Desencadenantes"}),(0,a.jsx)("input",{type:"text",value:p,onChange:e=>w(e.target.value),placeholder:"ej: despu\xe9s de comer, estr\xe9s...",className:"w-full rounded-xl border border-white/20 bg-black/40 p-3 text-sm text-white placeholder:text-white/50 focus:border-white/40 focus:outline-none backdrop-blur-sm"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-white",children:"Notas adicionales"}),(0,a.jsx)("textarea",{value:j,onChange:e=>v(e.target.value),placeholder:"Describe cualquier detalle adicional relevante...",rows:3,className:"w-full rounded-xl border border-white/20 bg-black/40 p-3 text-sm text-white placeholder:text-white/50 focus:border-white/40 focus:outline-none backdrop-blur-sm resize-none"})]}),"severo"===h&&(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-red-500/30 bg-red-500/10 p-3",children:[(0,a.jsx)(T.A,{className:"h-5 w-5 text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-200",children:"S\xedntoma de alta prioridad"}),(0,a.jsx)("p",{className:"text-xs text-red-300/80",children:"Se notificar\xe1 inmediatamente a tu equipo m\xe9dico"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:E,className:"flex-1 py-3 px-4 rounded-xl border border-white/20 bg-white/5 text-white hover:bg-white/10 transition font-medium text-sm",children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",disabled:N||!o&&!d,className:"flex-1 py-3 px-4 rounded-xl bg-red-600 hover:bg-red-500 text-white font-medium text-sm transition disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Registrando...":"Registrar S\xedntoma"})]})]})]})})}var P=s(6871),U=s(1448),z=s(5738),H=s(5090);let V=[{id:"1",name:"Lisinopril",dosage:"10mg",frequency:"Una vez al d\xeda",nextDose:"08:00",taken:!1},{id:"2",name:"Metformina",dosage:"500mg",frequency:"Dos veces al d\xeda",nextDose:"12:00",taken:!0},{id:"3",name:"Aspirina",dosage:"100mg",frequency:"Una vez al d\xeda",nextDose:"20:00",taken:!1}];function _(e){let{isOpen:t,onClose:s,patientId:n="current-patient"}=e,{recordMedicationTaken:i,isLoading:l}=O(),[o,c]=(0,r.useState)(V),[d,m]=(0,r.useState)(!1),[h,x]=(0,r.useState)({name:"",dosage:""}),[u,b]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),[w,j]=(0,r.useState)("");if(!t)return null;let v=async e=>{b(!0);try{await i(e.name,e.dosage,n),c(t=>t.map(t=>t.id===e.id?{...t,taken:!0}:t)),j("".concat(e.name," registrado correctamente")),f(!0),setTimeout(()=>f(!1),3e3)}catch(e){console.error("Error recording medication:",e)}finally{b(!1)}},N=Math.round(o.filter(e=>e.taken).length/o.length*100);return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl bg-black/80 backdrop-blur-sm rounded-2xl border border-white/20 shadow-2xl max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-500/20 text-blue-200",children:(0,a.jsx)(P.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Seguimiento de Medicamentos"}),(0,a.jsx)("p",{className:"text-xs text-white/70",children:"Registra las dosis tomadas hoy"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-xs text-white/60",children:"Adherencia hoy"}),(0,a.jsxs)("div",{className:"text-sm font-semibold ".concat(N>=80?"text-green-400":N>=60?"text-yellow-400":"text-red-400"),children:[N,"%"]})]}),(0,a.jsx)("button",{onClick:s,className:"rounded-full p-2 text-white/60 hover:bg-white/10 hover:text-white transition",children:(0,a.jsx)(g.A,{className:"h-5 w-5"})})]})]}),p&&(0,a.jsxs)("div",{className:"mx-6 mt-4 flex items-center gap-3 rounded-lg border border-green-500/30 bg-green-500/10 p-3",children:[(0,a.jsx)(D.A,{className:"h-5 w-5 text-green-400"}),(0,a.jsx)("p",{className:"text-sm text-green-200",children:w})]}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-white",children:"Medicamentos Actuales"}),(0,a.jsxs)("button",{onClick:()=>m(!d),className:"flex items-center gap-2 text-xs text-white/70 hover:text-white transition",children:[(0,a.jsx)(U.A,{className:"h-4 w-4"}),"Agregar medicamento"]})]}),d&&(0,a.jsxs)("div",{className:"space-y-3 p-4 rounded-lg border border-white/20 bg-white/5",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)("input",{type:"text",placeholder:"Nombre del medicamento",value:h.name,onChange:e=>x(t=>({...t,name:e.target.value})),className:"rounded-lg border border-white/20 bg-black/40 p-3 text-sm text-white placeholder:text-white/50 focus:border-white/40 focus:outline-none backdrop-blur-sm"}),(0,a.jsx)("input",{type:"text",placeholder:"Dosis (ej: 10mg)",value:h.dosage,onChange:e=>x(t=>({...t,dosage:e.target.value})),className:"rounded-lg border border-white/20 bg-black/40 p-3 text-sm text-white placeholder:text-white/50 focus:border-white/40 focus:outline-none backdrop-blur-sm"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>m(!1),className:"flex-1 py-2 px-3 rounded-lg border border-white/20 bg-white/5 text-white hover:bg-white/10 transition text-sm",children:"Cancelar"}),(0,a.jsx)("button",{onClick:()=>{if(!h.name||!h.dosage)return;let e={id:Date.now().toString(),name:h.name,dosage:h.dosage,frequency:"Seg\xfan necesidad",taken:!1};c(t=>[...t,e]),x({name:"",dosage:""}),m(!1)},className:"flex-1 py-2 px-3 rounded-lg bg-blue-600 hover:bg-blue-500 text-white transition text-sm",children:"Agregar"})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:o.map(e=>{let t=(e=>{if(!e)return{color:"text-white/60",status:"Sin horario"};let t=new Date,[s,a]=e.split(":").map(Number),r=new Date;r.setHours(s,a,0,0);let n=r.getTime()-t.getTime(),i=Math.floor(n/36e5),l=Math.floor(n%36e5/6e4);return n<0?{color:"text-red-400",status:"Hora pasada"}:n<18e5?{color:"text-yellow-400",status:"Pr\xf3xima dosis"}:{color:"text-green-400",status:"En ".concat(i,"h ").concat(l,"m")}})(e.nextDose);return(0,a.jsx)("div",{className:"p-4 rounded-lg border transition ".concat(e.taken?"border-green-500/30 bg-green-500/10":"border-white/20 bg-white/5 hover:bg-white/10"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-white",children:e.name}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/70",children:e.dosage}),e.taken&&(0,a.jsx)(D.A,{className:"h-4 w-4 text-green-400"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-white/70",children:[(0,a.jsx)("span",{children:e.frequency}),e.nextDose&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(z.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Pr\xf3xima: ",e.nextDose]}),(0,a.jsxs)("span",{className:t.color,children:["(",t.status,")"]})]})]})]}),!e.taken&&(0,a.jsx)("button",{onClick:()=>v(e),disabled:u,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-sm font-medium transition disabled:opacity-50",children:u?"Registrando...":"Marcar como tomado"})]})},e.id)})})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 rounded-lg border border-white/20 bg-white/5",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-white mb-3",children:"Resumen de Adherencia"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-green-400",children:o.filter(e=>e.taken).length}),(0,a.jsx)("div",{className:"text-xs text-white/70",children:"Tomados hoy"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-yellow-400",children:o.filter(e=>!e.taken).length}),(0,a.jsx)("div",{className:"text-xs text-white/70",children:"Pendientes"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-bold ".concat(N>=80?"text-green-400":N>=60?"text-yellow-400":"text-red-400"),children:[N,"%"]}),(0,a.jsx)("div",{className:"text-xs text-white/70",children:"Adherencia"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 rounded-lg border border-blue-500/30 bg-blue-500/10",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-blue-200 mb-2",children:"\uD83D\uDCA1 Consejos"}),(0,a.jsxs)("ul",{className:"text-xs text-blue-200/80 space-y-1",children:[(0,a.jsx)("li",{children:"• Toma tus medicamentos a la misma hora cada d\xeda"}),(0,a.jsx)("li",{children:"• Usa alarmas para recordar las dosis"}),(0,a.jsx)("li",{children:"• No suspendas medicamentos sin consultar a tu m\xe9dico"}),(0,a.jsx)("li",{children:"• Reporta efectos secundarios inmediatamente"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 p-6 border-t border-white/20",children:[(0,a.jsx)("button",{onClick:s,className:"flex-1 py-3 px-4 rounded-xl border border-white/20 bg-white/5 text-white hover:bg-white/10 transition font-medium text-sm",children:"Cerrar"}),(0,a.jsxs)("button",{className:"flex-1 py-3 px-4 rounded-xl bg-blue-600 hover:bg-blue-500 text-white font-medium text-sm transition",children:[(0,a.jsx)(H.A,{className:"h-4 w-4 inline mr-2"}),"Ver Historial"]})]})]})})}var W=s(6926),G=s(2629);let q=[{key:"weight",label:"Peso",icon:(0,a.jsx)(W.A,{className:"h-4 w-4"}),unit:"kg",placeholder:"70.5",type:"number",normalRange:"18.5-24.9 IMC",getStatusColor:e=>{if(!e)return"text-white/60";let t=e/2.8899999999999997;return t<18.5||t>30?"text-red-400":t>25?"text-yellow-400":"text-green-400"}},{key:"bloodPressure",label:"Presi\xf3n Arterial",icon:(0,a.jsx)(f.A,{className:"h-4 w-4"}),unit:"mmHg",placeholder:"120/80",type:"text",normalRange:"90/60 - 120/80",getStatusColor:e=>{if(!e)return"text-white/60";let t=e.match(/(\d+)\/(\d+)/);if(!t)return"text-white/60";let s=parseInt(t[1]),a=parseInt(t[2]);return s>140||a>90||s<90||a<60?"text-red-400":s>130||a>85?"text-yellow-400":"text-green-400"}},{key:"heartRate",label:"Frecuencia Card\xedaca",icon:(0,a.jsx)(d.A,{className:"h-4 w-4"}),unit:"bpm",placeholder:"75",type:"number",normalRange:"60-100 bpm",getStatusColor:e=>e?e<60||e>100?"text-red-400":e<65||e>90?"text-yellow-400":"text-green-400":"text-white/60"},{key:"temperature",label:"Temperatura",icon:(0,a.jsx)(w.A,{className:"h-4 w-4"}),unit:"\xb0C",placeholder:"36.5",type:"number",normalRange:"36.1-37.5\xb0C",getStatusColor:e=>e?e<36||e>38?"text-red-400":e<36.1||e>37.5?"text-yellow-400":"text-green-400":"text-white/60"},{key:"oxygenSaturation",label:"Saturaci\xf3n de Ox\xedgeno",icon:(0,a.jsx)(d.A,{className:"h-4 w-4"}),unit:"%",placeholder:"98",type:"number",normalRange:"95-100%",getStatusColor:e=>e?e<95?"text-red-400":e<97?"text-yellow-400":"text-green-400":"text-white/60"},{key:"glucoseLevel",label:"Glucosa",icon:(0,a.jsx)(G.A,{className:"h-4 w-4"}),unit:"mg/dL",placeholder:"90",type:"number",normalRange:"70-100 mg/dL (ayuno)",getStatusColor:e=>e?e<70||e>140?"text-red-400":e>100?"text-yellow-400":"text-green-400":"text-white/60"}];function F(e){let{isOpen:t,onClose:s,patientId:n="current-patient"}=e,{recordVitalSigns:i,isLoading:l}=O(),[o,c]=(0,r.useState)({}),[m,h]=(0,r.useState)(!1),[x,u]=(0,r.useState)(!1),[b,p]=(0,r.useState)("");if(!t)return null;let f=async e=>{if(e.preventDefault(),Object.values(o).some(e=>void 0!==e&&""!==e)){h(!0);try{await i(o,n),u(!0),setTimeout(()=>{u(!1),w()},2e3)}catch(e){console.error("Error recording vital signs:",e)}finally{h(!1)}}},w=()=>{c({}),p(""),u(!1),s()},j=(()=>{let e=q.map(e=>{let t=o[e.key];if(!t)return"normal";let s=e.getStatusColor(t);return s.includes("red")?"critical":s.includes("yellow")?"warning":"normal"});return e.includes("critical")?{status:"critical",color:"text-red-400",message:"Algunos valores requieren atenci\xf3n m\xe9dica"}:e.includes("warning")?{status:"warning",color:"text-yellow-400",message:"Algunos valores est\xe1n fuera del rango normal"}:{status:"normal",color:"text-green-400",message:"Todos los valores est\xe1n normales"}})(),v=Object.values(o).some(e=>void 0!==e&&""!==e);return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-3xl bg-black/80 backdrop-blur-sm rounded-2xl border border-white/20 shadow-2xl max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-green-500/20 text-green-200",children:(0,a.jsx)(d.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Registrar Signos Vitales"}),(0,a.jsx)("p",{className:"text-xs text-white/70",children:"Registra tus mediciones para seguimiento m\xe9dico"})]})]}),(0,a.jsx)("button",{onClick:w,className:"rounded-full p-2 text-white/60 hover:bg-white/10 hover:text-white transition",children:(0,a.jsx)(g.A,{className:"h-5 w-5"})})]}),x?(0,a.jsxs)("div",{className:"p-6 text-center space-y-4",children:[(0,a.jsx)("div",{className:"flex h-16 w-16 mx-auto items-center justify-center rounded-full bg-green-500/20 text-green-200",children:(0,a.jsx)(D.A,{className:"h-8 w-8"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Signos Vitales Registrados"}),(0,a.jsx)("p",{className:"text-sm text-white/70",children:"Tus datos han sido guardados correctamente"})]})]}):(0,a.jsxs)("form",{onSubmit:f,className:"overflow-y-auto max-h-[75vh]",children:[(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[v&&(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border p-3 ".concat("critical"===j.status?"border-red-500/30 bg-red-500/10":"warning"===j.status?"border-yellow-500/30 bg-yellow-500/10":"border-green-500/30 bg-green-500/10"),children:[(0,a.jsx)(d.A,{className:"h-5 w-5 ".concat(j.color)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium ".concat(j.color),children:["Estado General: ","critical"===j.status?"Requiere Atenci\xf3n":"warning"===j.status?"Valores L\xedmite":"Normal"]}),(0,a.jsx)("p",{className:"text-xs text-white/70",children:j.message})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:q.map(e=>{let t=o[e.key],s=e.getStatusColor(t);return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-white/70",children:e.icon}),(0,a.jsx)("label",{className:"text-sm font-medium text-white",children:e.label})]}),(0,a.jsx)("span",{className:"text-xs text-white/60",children:e.normalRange})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:e.type,value:t||"",onChange:t=>((e,t)=>{let s=q.find(t=>t.key===e);s&&c(a=>({...a,[e]:"number"===s.type?t?parseFloat(t):void 0:t}))})(e.key,t.target.value),placeholder:e.placeholder,step:"number"===e.type?"0.1":void 0,className:"w-full rounded-xl border border-white/20 bg-black/40 p-3 pr-12 text-sm text-white placeholder:text-white/50 focus:border-white/40 focus:outline-none backdrop-blur-sm"}),(0,a.jsxs)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-white/60",children:e.unit}),t&&(0,a.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(s.includes("red")?"bg-red-400":s.includes("yellow")?"bg-yellow-400":s.includes("green")?"bg-green-400":"bg-white/30")})]})]})]},e.key)})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-white",children:"Notas adicionales"}),(0,a.jsx)("textarea",{value:b,onChange:e=>p(e.target.value),placeholder:"A\xf1ade cualquier informaci\xf3n relevante sobre las mediciones...",rows:3,className:"w-full rounded-xl border border-white/20 bg-black/40 p-3 text-sm text-white placeholder:text-white/50 focus:border-white/40 focus:outline-none backdrop-blur-sm resize-none"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-blue-500/30 bg-blue-500/10",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-blue-200 mb-2",children:"\uD83D\uDCA1 Consejos para mediciones precisas"}),(0,a.jsxs)("ul",{className:"text-xs text-blue-200/80 space-y-1",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Presi\xf3n arterial:"})," Descansa 5 min antes de medir"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Peso:"})," Mide en ayunas, sin ropa pesada"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Temperatura:"})," Evita bebidas calientes 30 min antes"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Frecuencia card\xedaca:"})," Cuenta por 60 segundos para mayor precisi\xf3n"]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 p-6 border-t border-white/20",children:[(0,a.jsx)("button",{type:"button",onClick:w,className:"flex-1 py-3 px-4 rounded-xl border border-white/20 bg-white/5 text-white hover:bg-white/10 transition font-medium text-sm",children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",disabled:m||!v,className:"flex-1 py-3 px-4 rounded-xl bg-green-600 hover:bg-green-500 text-white font-medium text-sm transition disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Guardando...":"Registrar Signos Vitales"})]})]})]})})}function J(e){let{roomId:t="patient-room",className:s=""}=e,n=(0,r.useRef)(null),S=(0,r.useRef)(null),{isFocusMode:k,setFocusMode:C,isQuickActionsVisible:A,setQuickActionsVisible:D}=(0,y.HW)(),{currentSession:T,hasActiveSession:E,formattedDuration:M}=function(){let[e,t]=(0,r.useState)({currentSession:null,sessionHistory:[],isLoading:!1,error:null}),s=(0,r.useMemo)(()=>({sessionId:"session-"+Date.now(),doctorId:"dr-garcia-001",doctorName:"Dr. Garc\xeda L\xf3pez",appointmentType:"telemedicina",startTime:new Date().toISOString(),status:"active"}),[]);(0,r.useEffect)(()=>{t(e=>({...e,isLoading:!0})),setTimeout(()=>{t(e=>({...e,currentSession:s,sessionHistory:[{sessionId:"session-001",doctorId:"dr-garcia-001",doctorName:"Dr. Garc\xeda L\xf3pez",appointmentType:"consulta",startTime:"2024-01-15T10:00:00Z",duration:30,status:"completed"},{sessionId:"session-002",doctorId:"dr-martinez-002",doctorName:"Dr. Mart\xednez Silva",appointmentType:"control",startTime:"2024-01-10T14:30:00Z",duration:20,status:"completed"}],isLoading:!1,error:null}))},1e3)},[s]);let a=async e=>{t(e=>({...e,isLoading:!0,error:null}));try{await new Promise(e=>setTimeout(e,500)),t(e=>({...e,currentSession:e.currentSession?{...e.currentSession,status:"active",startTime:new Date().toISOString()}:null,isLoading:!1}))}catch(e){t(e=>({...e,error:"Error al iniciar la sesi\xf3n",isLoading:!1}))}},n=async()=>{if(e.currentSession){t(e=>({...e,isLoading:!0,error:null}));try{await new Promise(e=>setTimeout(e,500));let s={...e.currentSession,status:"completed",duration:Math.floor((Date.now()-new Date(e.currentSession.startTime).getTime())/1e3/60)};t(e=>({...e,currentSession:null,sessionHistory:[s,...e.sessionHistory],isLoading:!1}))}catch(e){t(e=>({...e,error:"Error al finalizar la sesi\xf3n",isLoading:!1}))}}},i=()=>{if(!e.currentSession||"active"!==e.currentSession.status)return 0;let t=new Date(e.currentSession.startTime).getTime();return Math.floor((Date.now()-t)/1e3)},l=e=>{let t=null!=e?e:i(),s=Math.floor(t/60);return"".concat(s.toString().padStart(2,"0"),":").concat((t%60).toString().padStart(2,"0"))};return{...e,startSession:a,endSession:n,getSessionDuration:i,formatSessionDuration:l,hasActiveSession:()=>{var t;return(null==(t=e.currentSession)?void 0:t.status)==="active"},canStartSession:()=>e.currentSession&&"scheduled"===e.currentSession.status,formattedDuration:l()}}(),[O,R]=(0,r.useState)(null),[P,U]=(0,r.useState)(null),[z,H]=(0,r.useState)(!1),[V,W]=(0,r.useState)(!1),[G,q]=(0,r.useState)(!1),[J,Y]=(0,r.useState)("idle"),[Q,K]=(0,r.useState)(null),[$,ee]=(0,r.useState)(!0),[et,es]=(0,r.useState)(!1),[ea,er]=(0,r.useState)(null),[en,ei]=(0,r.useState)(!1),[el,eo]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)(!1),[em,eh]=(0,r.useState)(!1),ex=(0,r.useMemo)(()=>{if("undefined"==typeof crypto)return"patient-guest";let e="autamedica-patient-signaling-id",t=window.sessionStorage.getItem(e);if(t)return t;let s=crypto.randomUUID();return window.sessionStorage.setItem(e,s),s},[]),eu=(0,r.useMemo)(()=>Q?{label:"Sin conexi\xf3n",color:"text-red-400"}:"live"===J?{label:"HD",color:"text-green-400"}:"connecting"===J?{label:"Conectando",color:"text-yellow-400"}:{label:"En espera",color:"text-gray-400"},[Q,J]);async function eb(){if("live"!==J)try{K(null),Y("connecting");let e=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}},audio:!0});R(e),W(!0),H(!1),Y("live")}catch(e){console.error("[EnhancedVideoCall] Error accessing camera:",e),K(e instanceof DOMException?e.message:"No se pudo acceder a la c\xe1mara. Verifica los permisos del navegador."),Y("idle")}}async function eg(){if(G){B(P),U(null),q(!1);return}try{let e=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});U(e),q(!0)}catch(e){console.warn("[EnhancedVideoCall] Screen sharing cancelled by user:",e),q(!1)}}return(0,r.useEffect)(()=>{if("live"===J){es(!0),C(!0),ei(!0);let e=setTimeout(()=>{es(!1)},3e3);return()=>clearTimeout(e)}C(!1)},[J,C]),(0,r.useEffect)(()=>{let e=()=>{ee(!0),ea&&clearTimeout(ea),er(setTimeout(()=>{"live"===J&&k&&ee(!1)},3e3))};if(k)return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e),ea&&clearTimeout(ea)}},[k,J,ea]),(0,r.useEffect)(()=>{n.current&&O&&(n.current.srcObject=O)},[O]),(0,r.useEffect)(()=>{S.current&&P&&(S.current.srcObject=P)},[P]),(0,r.useEffect)(()=>()=>{B(O),B(P)},[O,P]),(0,a.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col text-white ".concat(s),children:[(0,a.jsxs)("div",{className:"call-area ".concat(k?"gap-3":"gap-4"," flex min-h-0 flex-1 flex-col lg:flex-row"),children:[(0,a.jsxs)("section",{className:"call-area__videoCard relative flex min-h-0 flex-1 flex-col",children:[(0,a.jsxs)("div",{className:"relative flex min-h-0 flex-1 overflow-hidden rounded-lg",children:[Q?(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-3 bg-black/40 backdrop-blur-sm px-4 py-6 text-center text-white",children:[(0,a.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-red-500/20 text-red-200",children:(0,a.jsx)(i.A,{className:"h-10 w-10"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white",children:"No se detect\xf3 c\xe1mara"}),(0,a.jsx)("p",{className:"max-w-md text-sm text-white/70",children:Q}),(0,a.jsx)("button",{type:"button",onClick:eb,className:"rounded-lg bg-white/20 hover:bg-white/30 px-5 py-2 text-sm font-semibold text-white transition backdrop-blur-sm border border-white/20",children:"Reintentar"})]}):O?(0,a.jsx)("video",{ref:n,className:"call-area__video h-full w-full object-cover transition-opacity ".concat(V?"opacity-100":"opacity-0"),autoPlay:!0,playsInline:!0,muted:!0}):(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 bg-black/40 backdrop-blur-sm px-4 py-6 text-center",children:[(0,a.jsx)("div",{className:"flex h-24 w-24 items-center justify-center rounded-full bg-white/10 text-white/60",children:(0,a.jsx)(l.A,{className:"h-12 w-12"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Videoconsulta"}),(0,a.jsx)("p",{className:"text-sm text-white/70",children:"Inicia tu consulta m\xe9dica por video"})]}),(0,a.jsx)("button",{type:"button",onClick:eb,className:"rounded-lg bg-white/20 hover:bg-white/30 px-6 py-2 text-sm font-semibold text-white transition backdrop-blur-sm border border-white/20",children:"Iniciar videoconsulta"})]}),"connecting"===J&&(0,a.jsxs)("div",{className:"absolute inset-0 flex h-full flex-col items-center justify-center gap-3 bg-black/60 text-white backdrop-blur-sm",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 animate-spin text-white/80"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Conectando videollamada…"})]}),G&&(0,a.jsxs)("div",{className:"absolute bottom-4 right-4 flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-1 text-xs text-white backdrop-blur-sm",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),"Compartiendo pantalla"]}),k&&T&&"live"===J&&$&&(0,a.jsx)("div",{className:"video-badge z-10",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-lg bg-black/60 px-3 py-2 backdrop-blur-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-green-400"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-xs font-semibold text-white",children:["Dr. ",T.doctorName]}),(0,a.jsxs)("p",{className:"text-[10px] text-white/70",children:[T.appointmentType," • ",M]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-[10px] font-medium ".concat(eu.color),children:eu.label}),(0,a.jsx)("span",{className:"text-[10px] text-white/50",children:"• 45ms"})]})]})}),et&&"live"===J&&!k&&(0,a.jsx)("div",{className:"absolute top-4 left-4 transition-all duration-1000 ".concat(et?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border border-green-500/30 bg-green-500/10 px-3 py-2 text-xs backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-green-400"}),(0,a.jsxs)("span",{className:"font-medium text-green-200",children:[eu.label," • 45ms • Estable"]})]})}),(0,a.jsxs)("div",{className:"absolute right-4 top-4 flex flex-col items-end gap-3",children:["live"===J&&(0,a.jsx)("button",{type:"button",onClick:()=>{let e=!k;C(e),e&&(ei(!0),D(!1))},className:"rounded-full border px-3 py-1.5 text-[11px] font-medium transition ".concat(k?"border-green-400/50 bg-green-500/10 text-green-200 hover:bg-green-500/20":"border-white/30 bg-black/40 text-white hover:border-green-400/60 hover:text-white backdrop-blur-sm"),children:k?"Salir modo foco":"Activar modo foco"}),P&&(0,a.jsx)("div",{className:"hidden h-32 w-48 overflow-hidden rounded-lg border border-white/30 bg-black/50 shadow-lg sm:block backdrop-blur-sm",children:(0,a.jsx)("video",{ref:S,className:"h-full w-full object-cover",autoPlay:!0,muted:!0,playsInline:!0})})]}),(0,a.jsx)("div",{className:"video-overlay autoHide ".concat($?"opacity-100":"pointer-events-none opacity-0"),children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3 rounded-full border border-white/20 bg-black/60 px-4 py-3 shadow-lg backdrop-blur-sm sm:flex-nowrap sm:justify-start sm:px-6",children:[(0,a.jsx)(Z,{active:!z,iconActive:(0,a.jsx)(m.A,{className:"h-5 w-5"}),iconInactive:(0,a.jsx)(h.A,{className:"h-5 w-5"}),label:z?"Activar micr\xf3fono":"Silenciar",onClick:function(){if(!O)return;let e=!z;O.getAudioTracks().forEach(t=>{t.enabled=!e}),H(e)}}),(0,a.jsx)(Z,{active:V,iconActive:(0,a.jsx)(x.A,{className:"h-5 w-5"}),iconInactive:(0,a.jsx)(i.A,{className:"h-5 w-5"}),label:V?"Ocultar video":"Mostrar video",onClick:function(){if(!O)return;let e=!V;O.getVideoTracks().forEach(t=>{t.enabled=e}),W(e)}}),(0,a.jsx)(Z,{active:G,iconActive:(0,a.jsx)(c.A,{className:"h-5 w-5"}),iconInactive:(0,a.jsx)(u.A,{className:"h-5 w-5"}),label:G?"Detener pantalla":"Compartir pantalla",onClick:eg}),(0,a.jsx)("button",{type:"button",onClick:function(){B(O),B(P),R(null),U(null),W(!1),H(!1),q(!1),Y("ended")},className:"flex items-center justify-center rounded-full bg-red-600 text-white transition hover:bg-red-500 ".concat(k?"h-10 w-10":"h-12 w-12"),children:(0,a.jsx)(b.A,{className:k?"h-4 w-4":"h-5 w-5"})})]})})]}),(0,a.jsx)(I,{roomId:t,userId:ex,userType:"patient",metadata:{sessionId:(null==T?void 0:T.sessionId)||"guest-session",patientName:"Paciente"},className:"mt-3 rounded-2xl border border-white/20 bg-black/40 p-4 shadow-2xl backdrop-blur-sm sm:p-6"})]}),k&&(0,a.jsx)("button",{type:"button",onClick:()=>{D(!A),A||ei(!1)},className:"call-area__quickActionsHandle hidden flex-col items-center gap-1 rounded-2xl border border-white/30 bg-black/60 px-3 py-3 text-xs font-medium text-white shadow-lg transition hover:border-green-500/60 hover:text-white backdrop-blur-sm lg:flex ".concat(A?"ring-1 ring-green-400/60":""),"aria-expanded":A,"aria-label":"Herramientas del paciente",children:A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:"Cerrar"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"flex items-center gap-1 text-green-300",children:[(0,a.jsx)(p.A,{className:"h-3 w-3"}),(0,a.jsx)(f.A,{className:"h-3 w-3"}),(0,a.jsx)(w.A,{className:"h-3 w-3"}),(0,a.jsx)(j.A,{className:"h-3 w-3"})]}),(0,a.jsx)("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:"Acciones"}),(0,a.jsx)("span",{className:"text-[10px] font-normal text-white/60",children:"Chat \xb7 S\xedntomas \xb7 Notas"})]})}),(0,a.jsxs)("aside",{className:"right-drawer hidden h-full flex-col space-y-3 rounded-2xl border border-white/20 bg-black/40 p-3 shadow-xl backdrop-blur-sm lg:flex ".concat(k&&A?"right-drawer--open":""),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1 pb-0",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-white/70",children:"Herramientas"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[k&&(0,a.jsx)("button",{type:"button",onClick:()=>D(!1),className:"rounded-lg p-1 text-white/60 transition hover:bg-white/10 hover:text-white","aria-label":"Cerrar herramientas",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{type:"button",onClick:()=>ei(!en),className:"rounded-lg p-1 text-white/60 transition hover:bg-white/10 hover:text-white","aria-expanded":!en,"aria-controls":"patient-actions-panel",children:en?(0,a.jsx)(v.A,{className:"h-4 w-4"}):(0,a.jsx)(N.A,{className:"h-4 w-4"})})]})]}),!en&&(0,a.jsxs)("div",{id:"patient-actions-panel",className:"space-y-3 px-1 pb-2",children:[(0,a.jsxs)("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-1",children:[(0,a.jsx)(X,{label:"Chat con m\xe9dico",icon:(0,a.jsx)(p.A,{className:"h-4 w-4"}),intent:"primary",onClick:()=>console.log("Chat functionality coming soon")}),(0,a.jsx)(X,{label:"Reportar s\xedntoma",icon:(0,a.jsx)(f.A,{className:"h-4 w-4"}),intent:"warning",onClick:()=>eo(!0)}),(0,a.jsx)(X,{label:"Signos vitales",icon:(0,a.jsx)(w.A,{className:"h-4 w-4"}),intent:"success",onClick:()=>eh(!0)}),(0,a.jsx)(X,{label:"Medicamentos",icon:(0,a.jsx)(j.A,{className:"h-4 w-4"}),onClick:()=>ed(!0)})]}),(0,a.jsx)("div",{className:"rounded-lg border border-green-500/30 bg-green-500/10 p-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-3 w-3 text-green-400"}),(0,a.jsx)("p",{className:"text-xs text-green-200",children:"Consulta en progreso"})]})})]}),en&&(0,a.jsx)("div",{className:"px-1 pb-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3 rounded-lg border border-white/20 bg-white/5 py-2",children:[(0,a.jsx)(p.A,{className:"h-3 w-3 text-white/60"}),(0,a.jsx)(f.A,{className:"h-3 w-3 text-white/60"}),(0,a.jsx)(w.A,{className:"h-3 w-3 text-white/60"}),(0,a.jsx)(j.A,{className:"h-3 w-3 text-white/60"}),(0,a.jsx)("span",{className:"text-xs text-white/60",children:"4 herramientas"})]})})]})]}),k&&(0,a.jsx)("div",{className:"mt-3 flex items-center justify-center lg:hidden",children:(0,a.jsxs)("button",{type:"button",onClick:()=>ei(!1),className:"flex items-center gap-2 rounded-full border border-white/30 bg-black/50 px-4 py-2 text-xs text-white transition hover:border-white/50 hover:text-white backdrop-blur-sm",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),"Herramientas"]})}),k&&et&&(0,a.jsx)("div",{className:"pointer-events-none fixed inset-x-0 bottom-20 z-20 flex justify-center lg:hidden",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-green-500/30 bg-green-500/10 px-4 py-2 text-xs text-green-200 shadow-lg backdrop-blur-sm",children:[(0,a.jsx)("span",{className:"h-2 w-2 animate-pulse rounded-full bg-green-400"}),"Video optimizado para consulta"]})}),(0,a.jsx)(L,{isOpen:el,onClose:()=>eo(!1),patientId:"current-patient"}),(0,a.jsx)(_,{isOpen:ec,onClose:()=>ed(!1),patientId:"current-patient"}),(0,a.jsx)(F,{isOpen:em,onClose:()=>eh(!1),patientId:"current-patient"})]})}function B(e){null==e||e.getTracks().forEach(e=>{e.stop()})}function Z(e){let{active:t,iconActive:s,iconInactive:r,label:n,onClick:i}=e,{isFocusMode:l}=(0,y.HW)();return(0,a.jsx)("button",{type:"button",onClick:i,className:"flex items-center justify-center rounded-full transition ".concat(l?"h-10 w-10":"h-12 w-12"," ").concat(t?"bg-green-500 text-black hover:bg-green-400":"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm"),"aria-label":n,title:n,children:t?s:r})}function X(e){let{label:t,icon:s,intent:r="default",onClick:n,disabled:i=!1}=e;return(0,a.jsxs)("button",{type:"button",onClick:n,disabled:i,className:"flex w-full items-center gap-2 rounded-lg border px-3 py-2 text-xs font-medium transition disabled:opacity-50 disabled:cursor-not-allowed ".concat({default:"border-white/30 bg-white/5 text-white hover:bg-white/10",primary:"border-blue-500/40 bg-blue-600/10 text-blue-200 hover:bg-blue-600/20",success:"border-green-500/40 bg-green-600/10 text-green-200 hover:bg-green-600/20",warning:"border-yellow-500/40 bg-yellow-600/10 text-yellow-200 hover:bg-yellow-600/20"}[r]),children:[(0,a.jsx)("span",{className:"success"===r?"text-green-400":"primary"===r?"text-blue-400":"warning"===r?"text-yellow-400":"text-white/60",children:s}),t]})}function Y(){let[e,t]=(0,r.useState)("Paciente"),[s,i]=(0,r.useState)(!0),[o,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[x,u]=(0,r.useState)("disconnected"),p=(0,r.useMemo)(()=>{if("undefined"==typeof crypto)return"patient-demo";let e="autamedica-patient-signaling-id",t=window.sessionStorage.getItem(e);if(t)return t;let s=crypto.randomUUID();return window.sessionStorage.setItem(e,s),s},[]),[f,w]=(0,r.useState)([]),v=()=>{c(!1),u("disconnected")};return(0,r.useEffect)(()=>{(async()=>{let e=function(){let e="https://gtyvdircfhmdjiaelqkg.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MVg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4";return e&&t?(0,n.createBrowserClient)(e,t):(console.warn("Supabase environment variables not found"),null)}();if(e){let{data:{user:n}}=await e.auth.getUser();if(n){var s,a,r;t((null==(s=n.user_metadata)?void 0:s.name)||(null==(a=n.user_metadata)?void 0:a.full_name)||(null==(r=n.email)?void 0:r.split("@")[0])||"Paciente")}}})();let e=e=>{if(o)switch(e.key){case"m":case"M":case"c":case"C":break;case"h":case"H":v()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o]),(0,a.jsxs)("div",{className:"min-h-screen transition-all duration-300 ".concat(o?"page-in-call":"page-pre-call"),style:{display:"grid",gridTemplateColumns:o?"1fr 0":"1fr 320px",gap:"12px"},children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-20 flex items-center justify-between p-3 transition-all duration-300 ".concat(o?"bg-black/50 backdrop-blur-sm":"bg-transparent"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h1",{className:"text-sm font-bold text-white",children:"AutaMedica"}),(()=>{switch(x){case"connected":return(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-green-500/20 text-green-400 rounded-full",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Conectado"]});case"connecting":return(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-yellow-500/20 text-yellow-400 rounded-full",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),"Conectando..."]});default:return(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-gray-500/20 text-gray-400 rounded-full",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full"}),"Desconectado"]})}})()]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!o&&s&&(0,a.jsx)("button",{onClick:()=>i(!1),className:"px-3 py-1 text-xs bg-gray-700/60 text-gray-300 rounded hover:bg-gray-600/60 transition-colors",children:"Config. inicial"}),(0,a.jsx)("button",{onClick:()=>h(!d),className:"p-2 text-white hover:bg-white/10 rounded transition-colors",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"w-full h-screen overflow-hidden",children:o?(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsx)(J,{patientName:e,doctorName:"Dr. Garc\xeda",signalingUserId:p,roomId:"patient-consultation",onCallEnd:v}),(0,a.jsxs)("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex items-center gap-3 bg-black/60 backdrop-blur-sm rounded-full px-6 py-3",children:[(0,a.jsx)("button",{className:"p-3 bg-gray-700/60 hover:bg-gray-600/60 rounded-full transition-colors",title:"Micr\xf3fono (M)",children:(0,a.jsx)(m.A,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("button",{className:"p-3 bg-gray-700/60 hover:bg-gray-600/60 rounded-full transition-colors",title:"C\xe1mara (C)",children:(0,a.jsx)(l.A,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("button",{onClick:v,className:"p-3 bg-red-600 hover:bg-red-700 rounded-full transition-colors",title:"Colgar (H)",children:(0,a.jsx)(b.A,{className:"h-5 w-5 text-white"})})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full p-8",children:(0,a.jsxs)("div",{className:"w-full max-w-4xl aspect-video bg-black rounded-lg overflow-hidden relative",children:[(0,a.jsx)(J,{patientName:e,doctorName:"Dr. Garc\xeda",signalingUserId:p,roomId:"patient-consultation",onCallEnd:v}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Dr. Garc\xeda - Medicina General"}),(0,a.jsx)("p",{className:"text-white/80 mb-6",children:"Presiona para iniciar tu videoconsulta"}),(0,a.jsxs)("button",{onClick:()=>{c(!0),u("connecting"),setTimeout(()=>u("connected"),2e3)},className:"inline-flex items-center gap-2 px-8 py-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors",children:[(0,a.jsx)(l.A,{className:"h-5 w-5"}),"Iniciar Videoconsulta"]})]})})]})})})]}),(0,a.jsxs)("div",{className:"fixed top-0 right-0 h-full w-80 bg-black/90 backdrop-blur-sm border-l border-white/20 transform transition-transform duration-300 z-30 ".concat(d?"translate-x-0":"translate-x-full"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Herramientas M\xe9dicas"}),(0,a.jsx)("button",{onClick:()=>h(!1),className:"p-1 text-white hover:bg-white/10 rounded transition-colors",children:(0,a.jsx)(g.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4 overflow-y-auto h-full",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"bg-white/5 p-3 rounded border border-white/10",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-white mb-2",children:"\uD83D\uDC8A Medicamentos"}),(0,a.jsx)("p",{className:"text-xs text-white/80",children:"5 activos • 2 pendientes"})]}),(0,a.jsxs)("div",{className:"bg-white/5 p-3 rounded border border-white/10",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-white mb-2",children:"\uD83D\uDD2C Resultados"}),(0,a.jsx)("p",{className:"text-xs text-white/80",children:"3 nuevos disponibles"})]}),(0,a.jsxs)("div",{className:"bg-white/5 p-3 rounded border border-white/10",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-white mb-2",children:"\uD83D\uDCC8 Signos Vitales"}),(0,a.jsx)("p",{className:"text-xs text-white/80",children:"Peso: 72.5kg • IMC: 23.2"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-white mb-2",children:"Funciones Avanzadas"}),(0,a.jsx)("button",{className:"w-full text-left text-white/80 hover:text-white bg-gray-700/40 hover:bg-gray-700/60 p-2 rounded transition-colors text-sm",children:"\uD83D\uDCCB Historia Cl\xednica"}),(0,a.jsx)("button",{className:"w-full text-left text-white/80 hover:text-white bg-gray-700/40 hover:bg-gray-700/60 p-2 rounded transition-colors text-sm",children:"\uD83E\uDD16 Diagn\xf3stico IA"}),(0,a.jsx)("button",{className:"w-full text-left text-white/80 hover:text-white bg-gray-700/40 hover:bg-gray-700/60 p-2 rounded transition-colors text-sm",children:"\uD83D\uDCF7 An\xe1lisis Visual"}),(0,a.jsx)("button",{className:"w-full text-left text-white/80 hover:text-white bg-gray-700/40 hover:bg-gray-700/60 p-2 rounded transition-colors text-sm",children:"\uD83D\uDCAC Mensajes"})]})]})]}),d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>h(!1)})]})}},8947:(e,t,s)=>{"use strict";s.d(t,{HW:()=>i,VQ:()=>l});var a=s(8122),r=s(4050);let n=(0,r.createContext)(null);function i(){let e=(0,r.useContext)(n);if(!e)throw Error("usePatientPortal must be used within PatientPortalProvider");return e}function l(e){let{children:t}=e,[s,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1);return(0,a.jsx)(n.Provider,{value:{isFocusMode:s,setFocusMode:i,activePanel:l,setActivePanel:o,isQuickActionsVisible:c,setQuickActionsVisible:d},children:t})}}},e=>{e.O(0,[87,985,410,358],()=>e(e.s=2628)),_N_E=e.O()}]);