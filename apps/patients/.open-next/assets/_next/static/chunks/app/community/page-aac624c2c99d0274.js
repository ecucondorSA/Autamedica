(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{82:(e,t,s)=>{"use strict";s.d(t,{l:()=>A});var a=s(3919),l=s(4956),n=s(5770),r=s(3784),o=s(901),i=s(4082),c=s(3819),d=s(8873),x=s(3788),m=s(5721),u=s(3117),h=s(1156),p=s(8620),b=s(4947),g=s(47),f=s(1111),j=s(1455),v=s.n(j),N=s(3842);let w=[{icon:l.A,label:"Inicio",href:"/",active:!0},{icon:n.A,label:"Historia cl\xednica",href:"/medical-history",disabled:!0},{icon:r.A,label:"Salud Reproductiva",href:"/reproductive-health"},{icon:o.A,label:"Salud Preventiva",href:"/preventive-health"},{icon:i.A,label:"Citas",href:"/appointments",badge:"PR\xd3X."},{icon:c.A,label:"Videollamada",href:"#video",highlight:!0},{icon:d.A,label:"Indicadores",href:"/indicators",beta:!0},{icon:x.A,label:"Equipo m\xe9dico",href:"/team"}],y=[{icon:m.A,label:"ALTA IA",href:"#alta",assistant:!0},{icon:u.A,label:"Configuraci\xf3n",href:"/settings"},{icon:h.A,label:"Ayuda",href:"/help"}];function A(){let[e,t]=(0,f.useState)(null),[s,l]=(0,f.useState)(""),[n,r]=(0,f.useState)("U"),[o,i]=(0,f.useState)(null),[c,d]=(0,f.useState)(()=>"true"===localStorage.getItem("sidebar-collapsed"));return(0,f.useEffect)(()=>{(async()=>{try{var e,t,s,a,n;let o=(0,N.U)();if(!o)return;let{data:{user:c}}=await o.auth.getUser();if(!c)return;let d=(null==(e=c.user_metadata)?void 0:e.name)||(null==(t=c.user_metadata)?void 0:t.full_name)||(null==(s=c.email)?void 0:s.split("@")[0])||"Usuario";l(d);let x=(null==(a=c.user_metadata)?void 0:a.avatar_url)||(null==(n=c.user_metadata)?void 0:n.picture)||null;i(x);let m=d.split(" "),u=m.length>1?"".concat(m[0][0]).concat(m[1][0]).toUpperCase():m[0].substring(0,2).toUpperCase();r(u)}catch(e){console.error("Error fetching user data",e)}})()},[]),(0,a.jsxs)("aside",{className:"relative flex flex-col border-r border-stone-200 bg-white py-6 shadow-sm transition-all duration-300 ".concat(c?"w-[64px]":"w-[240px]"),children:[(0,a.jsx)("button",{onClick:()=>{let e=!c;d(e),localStorage.setItem("sidebar-collapsed",String(e))},className:"absolute -right-3 top-6 z-10 flex h-6 w-6 items-center justify-center rounded-full border border-stone-200 bg-white shadow-md transition hover:bg-stone-50","aria-label":c?"Expandir sidebar":"Colapsar sidebar",children:c?(0,a.jsx)(p.A,{className:"h-4 w-4 text-stone-600"}):(0,a.jsx)(b.A,{className:"h-4 w-4 text-stone-600"})}),(0,a.jsxs)("div",{className:"mb-8 px-4 ".concat(c?"px-2":""),children:[(0,a.jsx)("div",{className:"relative mx-auto cursor-pointer group ".concat(c?"h-10 w-10":"h-12 w-12"),title:s||"Usuario",children:o?(0,a.jsx)("img",{src:o,alt:s,className:"rounded-xl object-cover shadow-md ring-2 ring-stone-200 group-hover:ring-stone-800 transition-all ".concat(c?"h-10 w-10":"h-12 w-12")}):(0,a.jsx)("div",{className:"flex items-center justify-center rounded-xl bg-stone-700 text-white font-bold shadow-md group-hover:bg-stone-800 transition-colors ".concat(c?"h-10 w-10 text-xs":"h-12 w-12 text-sm"),children:c?n[0]:n||(0,a.jsx)(g.A,{className:"h-5 w-5"})})}),!c&&s&&(0,a.jsx)("p",{className:"mt-2 text-center text-xs font-medium text-stone-700 leading-tight truncate",children:s.split(" ")[0]})]}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-2",children:w.map(s=>{let l=s.icon,n=e===s.label,r=s.active,o=s.highlight,i=s.disabled;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(v(),{href:s.href,className:"\n                  group relative flex items-center gap-3 rounded-xl px-3 py-3 transition-all\n                  ".concat(r?"bg-stone-800 text-white shadow-md":"","\n                  ").concat(o&&!r?"bg-stone-100 text-stone-900 ring-2 ring-stone-600":"","\n                  ").concat(!r&&!o&&!i?"text-stone-700 hover:bg-stone-100 hover:text-stone-900":"","\n                  ").concat(i?"opacity-40 cursor-not-allowed":"","\n                  ").concat(c?"justify-center":"","\n                "),onMouseEnter:()=>t(s.label),onMouseLeave:()=>t(null),onClick:e=>i&&e.preventDefault(),children:[(0,a.jsx)(l,{className:"h-5 w-5 flex-shrink-0 ".concat(o?"animate-pulse":"")}),!c&&(0,a.jsx)("span",{className:"text-sm font-medium truncate",children:s.label}),s.badge&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 rounded-full bg-rose-600 px-1.5 py-0.5 text-[8px] font-bold text-white",children:s.badge}),s.beta&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 rounded-full bg-purple-500 px-1.5 py-0.5 text-[8px] font-bold text-white",children:"BETA"}),o&&!r&&(0,a.jsx)("div",{className:"absolute inset-0 rounded-xl bg-stone-50 ring-2 ring-stone-600/60 -z-10"})]}),c&&n&&(0,a.jsxs)("div",{className:"absolute left-full top-1/2 z-50 ml-2 -translate-y-1/2 whitespace-nowrap rounded-lg bg-stone-800 px-3 py-2 text-xs font-medium text-white shadow-xl",children:[s.label,(0,a.jsx)("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-stone-800"})]})]},s.label)})}),(0,a.jsx)("div",{className:"mx-4 my-4 border-t border-stone-300"}),(0,a.jsx)("div",{className:"space-y-1 px-2",children:y.map(s=>{let l=s.icon,n=e===s.label,r=s.assistant;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(v(),{href:s.href,className:"\n                  group relative flex items-center gap-3 rounded-xl px-3 py-3 transition-all\n                  ".concat(r?"bg-gradient-to-br from-stone-700 to-stone-800 text-white shadow-md":"text-stone-700 hover:bg-stone-100 hover:text-stone-900","\n                  ").concat(c?"justify-center":"","\n                "),onMouseEnter:()=>t(s.label),onMouseLeave:()=>t(null),children:[(0,a.jsx)(l,{className:"h-5 w-5 flex-shrink-0 ".concat(r?"animate-pulse":"")}),!c&&(0,a.jsx)("span",{className:"text-sm font-medium truncate",children:s.label}),r&&(0,a.jsxs)("span",{className:"absolute -top-1 -right-1 flex h-5 w-5",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-stone-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-5 w-5 bg-stone-600 items-center justify-center text-[8px] text-white font-bold",children:"AI"})]})]}),c&&n&&(0,a.jsxs)("div",{className:"absolute left-full top-1/2 z-50 ml-2 -translate-y-1/2 whitespace-nowrap rounded-lg bg-stone-800 px-3 py-2 text-xs font-medium text-white shadow-xl",children:[s.label,(0,a.jsx)("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-stone-800"})]})]},s.label)})})]})}},3857:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(3919),l=s(1111),n=s(9524),r=s(3224),o=s(901),i=s(47),c=s(173),d=s(6730),x=s(5757),m=s(8777),u=s(3948),h=s(8980),p=s(82),b=s(6470),g=s(7382);function f(){let[e,t]=(0,l.useState)("all"),[s,o]=(0,l.useState)(""),{groups:i,posts:c,loading:d,error:x,loadGroups:m,loadPosts:u,createPost:h,addReaction:f}=(0,g.nr)();return(0,l.useEffect)(()=>{m(),u({sort_by:"recent"})},[]),(0,l.useEffect)(()=>{u({sort_by:"popular"===e?"popular":"recent"})},[e]),(0,a.jsxs)("div",{className:"flex h-screen w-full overflow-hidden bg-stone-100",children:[(0,a.jsx)(p.l,{}),(0,a.jsxs)("main",{className:"flex flex-1 flex-col overflow-y-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-stone-900",children:"\uD83D\uDCAC Comunidad"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-stone-600",children:"Comparte experiencias y ap\xf3yate en otros pacientes"})]}),(0,a.jsxs)("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(n.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-stone-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar en la comunidad...",value:s,onChange:e=>o(e.target.value),className:"w-full rounded-lg border border-stone-300 bg-white py-2 pl-10 pr-4 text-sm text-stone-900 placeholder-stone-500 focus:border-amber-600 focus:outline-none focus:ring-2 focus:ring-amber-600/30"})]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 rounded-lg bg-amber-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-amber-500",children:[(0,a.jsx)(r.A,{className:"h-4 w-4"}),"Nueva publicaci\xf3n"]})]}),(0,a.jsxs)("div",{className:"mb-6 flex flex-wrap gap-2",children:[(0,a.jsx)(j,{active:"all"===e,onClick:()=>t("all"),label:"Todos"}),(0,a.jsx)(j,{active:"my-groups"===e,onClick:()=>t("my-groups"),label:"Mis grupos"}),(0,a.jsx)(j,{active:"popular"===e,onClick:()=>t("popular"),label:"Populares"}),(0,a.jsx)(j,{active:"questions"===e,onClick:()=>t("questions"),label:"Preguntas"})]}),(0,a.jsxs)("div",{className:"mb-6 rounded-2xl border border-stone-200 bg-white p-6 shadow-md",children:[(0,a.jsx)("h2",{className:"mb-4 text-lg font-semibold text-stone-900",children:"\uD83C\uDFF7️ Grupos Recomendados"}),d&&(0,a.jsx)("p",{className:"text-stone-600",children:"Cargando grupos..."}),x&&(0,a.jsxs)("p",{className:"text-red-600",children:["Error: ",x]}),(0,a.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:i.slice(0,6).map(e=>(0,a.jsx)(v,{name:e.name,members:e.member_count,icon:{chronic_conditions:"\uD83D\uDC89",mental_health:"\uD83E\uDDE0",pregnancy:"\uD83E\uDD30",caregivers:"\uD83D\uDC65",lifestyle:"\uD83C\uDFC3",general_support:"❤️"}[e.category]||"\uD83C\uDFE5",description:e.description},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[d&&(0,a.jsx)("p",{className:"text-stone-600",children:"Cargando publicaciones..."}),0===c.length&&!d&&(0,a.jsxs)("div",{className:"rounded-2xl border border-stone-200 bg-white p-12 text-center",children:[(0,a.jsx)("p",{className:"text-stone-600 mb-4",children:"A\xfan no hay publicaciones en esta comunidad"}),(0,a.jsx)("button",{className:"btn-primary bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-lg",children:"Crear la primera publicaci\xf3n"})]}),c.map(e=>{let t=i.find(t=>t.id===e.group_id),s=(e=>{let t=new Date,s=new Date(e),a=Math.floor((t.getTime()-s.getTime())/1e3);return a<60?"Hace un momento":a<3600?"Hace ".concat(Math.floor(a/60)," minutos"):a<86400?"Hace ".concat(Math.floor(a/3600)," horas"):a<604800?"Hace ".concat(Math.floor(a/86400)," d\xedas"):s.toLocaleDateString("es-ES")})(e.created_at);return(0,a.jsx)(N,{author:e.author_display_name,group:(null==t?void 0:t.name)||"Grupo desconocido",groupMembers:(null==t?void 0:t.member_count)||0,timeAgo:s,content:e.content,type:"question",likes:e.reaction_count,replies:e.comment_count,isVerified:!1},e.id)})]})]}),(0,a.jsx)(b.J,{context:"dashboard"})]})}function j(e){let{active:t,onClick:s,label:l}=e;return(0,a.jsx)("button",{onClick:s,className:"rounded-lg px-4 py-2 text-sm font-medium transition-all ".concat(t?"bg-stone-800 text-white shadow-md":"bg-white text-stone-700 border border-stone-200 hover:bg-stone-50 hover:border-stone-800"),children:l})}function v(e){let{name:t,members:s,icon:l,description:n}=e;return(0,a.jsxs)("div",{className:"rounded-lg bg-stone-50 border border-stone-200 p-4 transition hover:bg-stone-100 hover:border-stone-800 cursor-pointer",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:l}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-stone-900",children:t}),(0,a.jsxs)("p",{className:"text-xs text-stone-600",children:[(0,a.jsx)(o.A,{className:"mr-1 inline-block h-3 w-3"}),s.toLocaleString()," miembros"]})]})]}),(0,a.jsx)("p",{className:"text-xs text-stone-600",children:n}),(0,a.jsx)("button",{className:"mt-3 w-full rounded bg-amber-600 py-1.5 text-xs font-semibold text-white transition hover:bg-amber-500",children:"Unirse al grupo"})]})}function N(e){let{author:t,group:s,groupMembers:l,timeAgo:n,content:r,type:p,likes:b,replies:g,isVerified:f,isDoctor:j=!1}=e,v={question:{icon:"❓",label:"Pregunta",color:"text-blue-600 bg-blue-50"},experience:{icon:"\uD83D\uDCAA",label:"Experiencia",color:"text-green-600 bg-green-50"},resource:{icon:"\uD83D\uDCDA",label:"Recurso",color:"text-purple-600 bg-purple-50"}}[p];return(0,a.jsxs)("div",{className:"rounded-2xl border border-stone-200 bg-white p-6 shadow-md transition hover:border-stone-800",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-stone-200",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-stone-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-semibold text-stone-900",children:t}),j&&(0,a.jsxs)("span",{className:"flex items-center gap-1 rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700",children:[(0,a.jsx)(c.A,{className:"h-3 w-3"}),"M\xe9dico"]}),f&&!j&&(0,a.jsx)(c.A,{className:"h-4 w-4 text-green-600",title:"Usuario verificado"})]}),(0,a.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs text-stone-600",children:[(0,a.jsx)(o.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[s," (",l.toLocaleString()," miembros)"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)(d.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:n})]})]})]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ".concat(v.color),children:[(0,a.jsx)("span",{children:v.icon}),(0,a.jsx)("span",{children:v.label})]})]}),(0,a.jsx)("p",{className:"mb-4 text-sm text-stone-900",children:r}),(0,a.jsxs)("div",{className:"flex items-center gap-6 text-sm text-stone-600",children:[(0,a.jsxs)("button",{className:"flex items-center gap-2 transition hover:text-amber-600",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:b})]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 transition hover:text-amber-600",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[g," respuestas"]})]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 transition hover:text-amber-600",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Guardar"})]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 transition hover:text-amber-600",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Compartir"})]})]})]})}},4520:(e,t,s)=>{Promise.resolve().then(s.bind(s,3857))},6470:(e,t,s)=>{"use strict";s.d(t,{J:()=>i});var a=s(3919),l=s(1111),n=s(7532),r=s(8056),o=s(7741);function i(e){let{context:t="dashboard"}=e,[s,i]=(0,l.useState)(()=>{let e=localStorage.getItem("right-panel-open");return null===e||"true"===e}),c=()=>{let e=!s;i(e),localStorage.setItem("right-panel-open",String(e))};return(0,a.jsxs)(a.Fragment,{children:[!s&&(0,a.jsx)("button",{onClick:c,className:"fixed right-4 top-4 z-40 flex h-12 w-12 items-center justify-center rounded-full bg-stone-800 text-white shadow-lg transition hover:bg-stone-900 hover:scale-110","aria-label":"Abrir panel lateral",children:(0,a.jsx)(n.A,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"fixed right-0 top-0 z-30 h-screen transition-transform duration-300 ".concat(s?"translate-x-0":"translate-x-full"),style:{width:"320px"},children:(0,a.jsxs)("div",{className:"relative h-full",children:[(0,a.jsx)("button",{onClick:c,className:"absolute -left-10 top-4 z-10 flex h-8 w-8 items-center justify-center rounded-full bg-stone-800 text-white shadow-lg transition hover:bg-stone-900","aria-label":"Cerrar panel lateral",children:(0,a.jsx)(r.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.U,{context:t})]})}),s&&(0,a.jsx)("div",{className:"fixed inset-0 z-20 bg-black/20 backdrop-blur-sm md:hidden",onClick:c})]})}}},e=>{e.O(0,[613,585,896,810,129,678,438,216,382,554,829,358],()=>e(e.s=4520)),_N_E=e.O()}]);