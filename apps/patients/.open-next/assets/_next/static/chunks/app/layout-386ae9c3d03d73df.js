(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{949:(e,t,s)=>{"use strict";s.d(t,{PatientPortalShell:()=>E});var a=s(8122),l=s(4050),i=s(3914),n=s(5090),o=s(6235),r=s(5509),c=s(7464),d=s(812),m=s(9685),p=s(6660),x=s(8893),u=s(1919),h=s(1984),b=s(1468),f=s(6076),g=s(7987),v=s(7903);s(3584),s(6811);class j{error(e){for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];console.error("[ERROR] ".concat(e),...s)}warn(e){for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];console.warn("[WARN] ".concat(e),...s)}info(e){for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];console.info("[INFO] ".concat(e),...s)}debug(e){for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];console.debug("[DEBUG] ".concat(e),...s)}}new j;let N={PATIENT:"patient",DOCTOR:"doctor",COMPANY_ADMIN:"company_admin",PLATFORM_ADMIN:"platform_admin"};N.PATIENT,N.DOCTOR,N.COMPANY_ADMIN,N.PLATFORM_ADMIN,N.PATIENT,N.DOCTOR,N.COMPANY_ADMIN,N.PLATFORM_ADMIN,N.PATIENT,N.DOCTOR,N.COMPANY_ADMIN,N.PLATFORM_ADMIN;var y=s(6811);function w(){let e=y.env.NEXT_PUBLIC_NODE_ENV||"production";return"production"===e?"production":"staging"===e?"staging":"development"}function A(){return({production:{base:"pages.dev",cookie:".pages.dev",apps:{web:"https://autamedica-web-app.pages.dev",patients:"https://autamedica-patients.pages.dev",doctors:"https://autamedica-doctors.pages.dev",companies:"https://autamedica-companies.pages.dev",admin:"https://autamedica-admin.pages.dev"}},staging:{base:"pages.dev",cookie:".pages.dev",apps:{web:"https://autamedica-web-app-staging.pages.dev",patients:"https://autamedica-patients-staging.pages.dev",doctors:"https://autamedica-doctors-staging.pages.dev",companies:"https://autamedica-companies-staging.pages.dev",admin:"https://autamedica-admin-staging.pages.dev"}},development:{base:"localhost",cookie:"localhost",apps:{web:"http://localhost:3000",patients:"http://localhost:3003",doctors:"http://localhost:3002",companies:"http://localhost:3004",admin:"http://localhost:3005"}}})[w()]}var C=null;let P=(0,l.createContext)(null),I="Paciente";function D(e){return e.split(" ").filter(Boolean).map(e=>e[0]).join("").slice(0,2).toUpperCase()||"PT"}function k(e){let{label:t}=e;return(0,a.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-3 bg-[#0f1419] text-center text-slate-300",children:[(0,a.jsx)("span",{className:"text-4xl",children:"\uD83C\uDFE5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-semibold",children:t}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Esta secci\xf3n estar\xe1 disponible pr\xf3ximamente."})]})]})}function M(e){let{title:t,icon:s,description:l}=e;return(0,a.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-4 rounded-xl border border-slate-800/60 bg-[#0d1117] p-8 text-center",children:[(0,a.jsx)("span",{className:"text-6xl",children:s}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-100",children:t}),(0,a.jsx)("p",{className:"text-slate-400",children:l})]}),(0,a.jsx)("button",{type:"button",onClick:()=>window.location.reload(),className:"rounded-lg bg-slate-700 px-4 py-2 text-sm text-slate-200 transition hover:bg-slate-600",children:"Actualizar p\xe1gina"})]})}function E(e){let{children:t}=e,[s,j]=(0,l.useState)("dashboard"),[N,y]=(0,l.useState)(I),[E,S]=(0,l.useState)(""),[T,O]=(0,l.useState)(!1),[_,R]=(0,l.useState)(!1),[F,V]=(0,l.useState)(null),[J,U]=(0,l.useState)(!1),[H,Y]=(0,l.useState)(!1);(0,l.useEffect)(()=>{U(!0)},[]);let z=e=>{switch(O(!1),H&&Y(!1),e){case"settings":V("settings");break;case"help":V("help");break;case"medical-history":V("medical-history");break;case"appointments":V("appointments");break;case"telemedicine":V("telemedicine");break;case"health-monitoring":V("health-monitoring");break;case"reports":V("reports");break;case"care-team":V("care-team");break;case"privacy":V("privacy");break;default:V(null)}};(0,l.useEffect)(()=>{let e=()=>{S(new Intl.DateTimeFormat("es-ES",{hour:"2-digit",minute:"2-digit"}).format(new Date))};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]),(0,l.useEffect)(()=>{(async()=>{try{var e,t;let s=function(){if(C)return C;let{url:e,anonKey:t}=function(){let e=w(),t="https://gtyvdircfhmdjiaelqkg.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MVg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4";return"development"===e&&t.includes("localhost:54321")?{url:"http://localhost:54321",anonKey:s}:{url:t,anonKey:s}}(),s={cookieName:"autamedica_session",cookieDomain:A().cookie,maxAge:2592e3,refreshThreshold:3600,rememberMeDuration:7776e3},a=A();return C=(0,v.createBrowserClient)(e,t,{cookies:{get(e){{let t=document.cookie.split("; ").find(t=>t.startsWith("".concat(e,"=")));return t?decodeURIComponent(t.split("=")[1]||""):void 0}},set(e,t,l){{let i=["".concat(e,"=").concat(encodeURIComponent(t)),"path=/","domain=".concat(a.cookie),"max-age=".concat(l.maxAge||s.maxAge),"SameSite=Lax","Secure"];document.cookie=i.join("; ")}},remove(e){[a.cookie,".".concat(a.base),a.base,"localhost"].forEach(t=>{document.cookie="".concat(e,"=; path=/; domain=").concat(t,"; expires=Thu, 01 Jan 1970 00:00:00 GMT")})}},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",storage:{getItem:e=>{try{return window.localStorage.getItem(e)}catch(t){return window.sessionStorage.getItem(e)}},setItem:(e,t)=>{try{window.localStorage.setItem(e,t)}catch(s){window.sessionStorage.setItem(e,t)}},removeItem:e=>{try{window.localStorage.removeItem(e)}catch(t){window.sessionStorage.removeItem(e)}}}}})}(),{data:a,error:l}=await s.auth.getUser();if(l)return void console.warn("[PatientPortalShell] Auth session missing!",l.message);let i=a.user;if(!i)return void console.info("[PatientPortalShell] No hay usuario autenticado, usando fallback");let n=i.user_metadata,o=(null==n?void 0:n.name)||(null==n?void 0:n.full_name)||(null==(t=i.email)||null==(e=t.split("@")[0])?void 0:e.replaceAll("."," "))||I;y(o),console.info("[PatientPortalShell] Usuario cargado:",o)}catch(e){console.error("[PatientPortalShell] Error al obtener usuario:",e)}})()},[]);let W=(0,l.useMemo)(()=>[{id:"medical-history",icon:i.A,label:"Historia Cl\xednica",count:0},{id:"appointments",icon:n.A,label:"Mis Citas",count:0,badge:"Pr\xf3x."},{id:"telemedicine",icon:o.A,label:"Videollamada",badge:"NEW"},{id:"health-monitoring",icon:r.A,label:"Monitoreo",count:0},{id:"reports",icon:c.A,label:"Reportes",count:0},{id:"care-team",icon:d.A,label:"Equipo M\xe9dico"},{id:"privacy",icon:m.A,label:"Privacidad",badge:"HIPAA"},{id:"help",icon:p.A,label:"Ayuda"},{id:"settings",icon:x.A,label:"Configuraci\xf3n"}],[]),L=(0,l.useMemo)(()=>[{id:"dashboard",label:"Panel Principal",icon:"\uD83C\uDFE0"},{id:"medical-history",label:"Historia Cl\xednica",icon:"\uD83D\uDCCB"},{id:"appointments",label:"Mis Citas",icon:"\uD83D\uDCC5"},{id:"telemedicine",label:"Videollamada",icon:"\uD83C\uDFA5"},{id:"reports",label:"Reportes M\xe9dicos",icon:"\uD83D\uDCCA"},{id:"health-monitoring",label:"Monitoreo",icon:"❤️"}],[]),Z=W.map(e=>{let{id:t,icon:s,label:l,count:i,badge:n}=e;return(0,a.jsxs)("button",{type:"button",className:"flex w-full items-center justify-between rounded-lg border border-transparent px-3 py-2 text-left transition hover:border-slate-700 hover:bg-slate-800/40 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 ".concat(F===t?"bg-slate-800/60 border-slate-600":"bg-transparent"),onClick:()=>z(t),children:[(0,a.jsxs)("span",{className:"flex items-center gap-3 text-sm",children:[(0,a.jsx)(s,{className:"h-4 w-4 text-slate-400"}),(0,a.jsx)("span",{className:"text-slate-200",children:l})]}),(0,a.jsxs)("span",{className:"flex items-center gap-2",children:["number"==typeof i&&(0,a.jsx)("span",{className:"rounded-full bg-[#4fd1c5] px-2 py-0.5 text-xs font-semibold text-slate-900",children:i}),n&&(0,a.jsx)("span",{className:"rounded-full bg-emerald-400 px-2 py-0.5 text-xs font-bold text-slate-900",children:n})]})]},t)});return(0,a.jsx)(P.Provider,{value:{activeTab:s,setActiveTab:j,userName:N,isFocusMode:H,setFocusMode:Y},children:(0,a.jsxs)("div",{className:"app h-screen ".concat(H?"app--focus":""," bg-[#0d1117] text-slate-100"),suppressHydrationWarning:!0,children:[(0,a.jsxs)("header",{className:"header z-10 flex items-center justify-between gap-3 border-b border-slate-800/60 bg-[#161b22] px-4 sm:px-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg border border-slate-700/60 bg-slate-900/60 p-2 text-slate-300 transition hover:border-slate-500 hover:text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 ".concat(H?"":"md:hidden"),onClick:()=>O(!0),"aria-label":"Abrir men\xfa",children:(0,a.jsx)(u.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("span",{className:"h-3 w-3 rounded-full bg-red-500"}),(0,a.jsx)("span",{className:"h-3 w-3 rounded-full bg-yellow-400"}),(0,a.jsx)("span",{className:"h-3 w-3 rounded-full bg-green-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-200",children:"AutaMedica Patient Portal"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:N})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-300",children:[(0,a.jsxs)("span",{className:"hidden items-center gap-1 text-[#4fd1c5] sm:flex",children:[(0,a.jsx)("span",{children:"●"}),"Conectado"]}),(0,a.jsx)("span",{className:"hidden text-slate-600 sm:inline",children:"|"}),(0,a.jsx)("span",{children:E})]})]}),(0,a.jsx)("div",{className:"tabs border-b border-slate-800/60 bg-[#161b22]",children:(0,a.jsx)("div",{className:"flex h-full w-full items-center overflow-x-auto px-2 sm:px-6",children:(0,a.jsx)("div",{className:"flex min-w-full snap-x snap-mandatory gap-2 md:min-w-0 md:gap-0",children:L.map(e=>{let t=e.id===s;return(0,a.jsxs)("button",{type:"button",onClick:()=>j(e.id),className:"flex min-w-[180px] snap-start items-center gap-2 rounded-lg px-4 py-2 text-sm transition md:min-w-0 md:rounded-none md:border-r md:border-transparent md:px-5 md:py-2.5 ".concat(t?"bg-[#21262d] font-medium text-white md:bg-[#21262d] md:border-slate-700":"text-slate-400 hover:bg-slate-800/40 hover:text-slate-200"),children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{className:"whitespace-nowrap",children:e.label})]},e.id)})})})}),T&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-slate-950/80 backdrop-blur-sm ".concat(H?"":"md:hidden"),role:"dialog","aria-modal":"true",children:(0,a.jsxs)("div",{className:"relative h-full w-72 max-w-[85vw] bg-[#161b22] px-5 py-6 shadow-2xl",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{V(null),j("dashboard"),O(!1)},className:"text-sm font-semibold text-slate-200 transition-colors hover:text-[#4fd1c5]",children:"Portal Paciente"}),(0,a.jsx)("button",{type:"button",onClick:()=>O(!1),className:"rounded-lg border border-slate-700/60 bg-slate-900/60 p-2 text-slate-300 transition hover:border-slate-500 hover:text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500","aria-label":"Cerrar men\xfa",children:(0,a.jsx)(h.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("nav",{className:"space-y-2 overflow-y-auto pb-16",children:Z}),(0,a.jsx)("div",{className:"absolute inset-x-5 bottom-6 rounded-xl border border-slate-800/60 bg-slate-900/70 p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-[#4fd1c5] text-slate-900",children:D(N)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-200",children:N}),(0,a.jsx)("p",{className:"text-xs text-[#4fd1c5]",children:"● En l\xednea"})]})]})})]})}),(0,a.jsxs)("div",{className:"app__layout flex min-h-0 overflow-hidden",children:[(0,a.jsxs)("aside",{className:"left-rail relative hidden flex-col border-r border-slate-800/60 bg-[#161b22] px-2 py-4 transition-all duration-300 md:flex ".concat(_?"":"left-rail--expanded"),children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[!_&&(0,a.jsx)("button",{type:"button",onClick:()=>{V(null),j("dashboard")},className:"text-[10px] font-semibold uppercase tracking-[0.2em] text-slate-500 transition-colors hover:text-[#4fd1c5]",children:"Portal Paciente"}),_&&(0,a.jsx)("button",{type:"button",onClick:()=>{V(null),j("dashboard")},className:"rounded-lg p-2 text-slate-500 transition-colors hover:bg-slate-800/40 hover:text-[#4fd1c5]",title:"Portal Paciente",children:(0,a.jsx)(b.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{type:"button",onClick:()=>R(!_),className:"rounded-lg border border-slate-700/60 bg-slate-900/60 p-1.5 text-slate-300 transition hover:border-slate-500 hover:text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500","aria-label":_?"Expandir sidebar":"Contraer sidebar",children:_?(0,a.jsx)(f.A,{className:"h-4 w-4"}):(0,a.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("nav",{className:"space-y-2",children:W.map(e=>{let{id:t,icon:s,label:l,count:i,badge:n}=e;return(0,a.jsxs)("button",{type:"button",className:"sidebar-button flex w-full items-center justify-between rounded-lg border border-transparent px-2 py-2 text-left text-xs transition hover:border-slate-700 hover:bg-slate-800/40 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible-outline-blue-500 ".concat(F===t?"border-slate-600 bg-slate-800/60":""," ").concat(_?"flex-col gap-1 text-center":"gap-2"),onClick:e=>{e.stopPropagation(),z(t)},title:_?l:void 0,children:[(0,a.jsxs)("span",{className:"flex items-center gap-2 ".concat(_?"justify-center":""),children:[(0,a.jsx)(s,{className:"h-4 w-4 text-slate-400"}),!_&&(0,a.jsx)("span",{className:"text-slate-200",children:l})]}),!_&&(0,a.jsxs)("span",{className:"flex items-center gap-2",children:["number"==typeof i&&(0,a.jsx)("span",{className:"rounded-full bg-[#4fd1c5] px-2 py-0.5 text-[10px] font-semibold text-slate-900",children:i}),n&&(0,a.jsx)("span",{className:"rounded-full bg-emerald-400 px-2 py-0.5 text-[10px] font-bold text-slate-900",children:n})]})]},t)})}),(0,a.jsx)("div",{className:"mt-auto rounded-xl border border-slate-800/60 bg-slate-900/60 p-3 ".concat(_?"px-2":""),children:(0,a.jsxs)("div",{className:"flex items-center gap-3 ".concat(_?"flex-col text-center":""),children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-[#4fd1c5] text-slate-900",children:D(N)}),!_&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-200",children:N}),(0,a.jsx)("p",{className:"text-xs text-[#4fd1c5]",children:"● En l\xednea"})]})]})})]}),(0,a.jsxs)("main",{className:"flex min-h-0 flex-1 flex-col bg-[#0d1117]",children:[(0,a.jsx)("section",{className:"flex min-h-0 flex-1 overflow-hidden ".concat("p-0"),children:(0,a.jsxs)("div",{className:"flex h-full w-full flex-col overflow-auto p-6",role:"main","aria-label":"Panel de contenido principal del paciente",children:["settings"===F&&(0,a.jsx)(M,{title:"Configuraci\xf3n de Cuenta",icon:"⚙️",description:"Gestiona tus preferencias, notificaciones y configuraci\xf3n de privacidad"}),"help"===F&&(0,a.jsx)(M,{title:"Centro de Ayuda",icon:"❓",description:"Encuentra respuestas a tus preguntas sobre el portal del paciente"}),"medical-history"===F&&(0,a.jsx)(M,{title:"Historia Cl\xednica",icon:"\uD83D\uDCCB",description:"Accede a tu historial m\xe9dico completo y documentos cl\xednicos"}),"appointments"===F&&(0,a.jsx)(M,{title:"Mis Citas M\xe9dicas",icon:"\uD83D\uDCC5",description:"Programa, modifica y ve el historial de tus citas m\xe9dicas"}),"telemedicine"===F&&(0,a.jsx)(M,{title:"Telemedicina",icon:"\uD83C\uDFA5",description:"Consultas m\xe9dicas por videollamada segura"}),"health-monitoring"===F&&(0,a.jsx)(M,{title:"Monitoreo de Salud",icon:"❤️",description:"Seguimiento de signos vitales y m\xe9tricas de salud"}),"reports"===F&&(0,a.jsx)(M,{title:"Reportes M\xe9dicos",icon:"\uD83D\uDCCA",description:"Visualiza y descarga tus reportes m\xe9dicos y resultados de laboratorio"}),"care-team"===F&&(0,a.jsx)(M,{title:"Equipo M\xe9dico",icon:"\uD83D\uDC65",description:"Conoce a tu equipo de atenci\xf3n m\xe9dica y especialistas"}),"privacy"===F&&(0,a.jsx)(M,{title:"Privacidad y Seguridad",icon:"\uD83D\uDEE1️",description:"Configuraci\xf3n de privacidad y protecci\xf3n de datos m\xe9dicos conforme a HIPAA"}),!F&&(0,a.jsx)("div",{className:"flex min-h-0 flex-1 overflow-hidden",children:"dashboard"===s?(0,a.jsx)("div",{className:"flex min-h-0 w-full flex-1 overflow-hidden",children:t}):(0,a.jsxs)("div",{className:"flex min-h-0 w-full flex-1 overflow-y-auto rounded-xl border border-slate-800/60 bg-[#161b22] p-6",children:["medical-history"===s&&(0,a.jsx)(k,{label:"Historia Cl\xednica"}),"appointments"===s&&(0,a.jsx)(k,{label:"Mis Citas"}),"telemedicine"===s&&(0,a.jsx)(k,{label:"Videollamada"}),"reports"===s&&(0,a.jsx)(k,{label:"Reportes M\xe9dicos"}),"health-monitoring"===s&&(0,a.jsx)(k,{label:"Monitoreo de Salud"})]})})]})}),(0,a.jsxs)("footer",{className:"flex flex-col items-center gap-2 border-t border-slate-800/60 bg-[#161b22] px-4 py-3 text-xs text-slate-300 sm:flex-row sm:justify-between sm:px-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3 sm:justify-start",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{role:"img","aria-label":"hospital",children:"\uD83C\uDFE5"}),(0,a.jsx)("span",{className:"font-semibold text-slate-100",children:"AutaMedica"})]}),(0,a.jsx)("span",{className:"hidden text-slate-600 sm:inline",children:"|"}),(0,a.jsxs)("span",{className:"flex items-center gap-1 text-[#4fd1c5]",children:[(0,a.jsx)("span",{children:"●"}),"Portal del Paciente"]}),(0,a.jsx)("span",{className:"hidden text-slate-600 sm:inline",children:"|"}),(0,a.jsx)("span",{children:"Pr\xf3xima cita: Ma\xf1ana 10:00 AM"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{role:"img","aria-label":"seguridad",children:"\uD83D\uDEE1️"}),(0,a.jsx)("span",{children:"Datos Protegidos"})]}),(0,a.jsx)("span",{className:"hidden text-slate-600 sm:inline",children:"|"}),(0,a.jsxs)("span",{className:"flex items-center gap-1 text-[#4fd1c5]",children:[(0,a.jsx)("span",{children:"●"}),"Sistema Online"]})]})]})]})]})]})})}},7836:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,8163,23)),Promise.resolve().then(s.bind(s,949))},8163:()=>{}},e=>{e.O(0,[477,879,874,985,410,358],()=>e(e.s=7836)),_N_E=e.O()}]);