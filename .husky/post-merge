#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Auto-sync Claude Code agents after merge
# This ensures agents are always up-to-date with agentic-config.json

echo "ğŸ¤– Syncing Claude Code agents..."

# Check if agentic-config.json changed
if git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep -q "\.claude/agentic-config.json"; then
  echo "ğŸ“ agentic-config.json changed, re-registering agents..."
  node scripts/register-claude-agents.mjs
  echo "âœ… Agents synchronized!"
else
  echo "â„¹ï¸  No agent config changes detected"
fi
