#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ðŸ”Ž Verificando glosarios antes del commit..."

# Check if database-related files are being committed
DB_FILES=$(git diff --cached --name-only | grep -E "(supabase|database|schema|migration|sql)" || true)

if [ -n "$DB_FILES" ]; then
  echo "ðŸ“Š Archivos de base de datos detectados, ejecutando validaciÃ³n..."
  # DB Glossary check (rÃ¡pido)
  pnpm docs:db:ci
  pnpm docs:db:check-diff
else
  echo "âœ… No hay cambios en base de datos, omitiendo validaciÃ³n DB"
fi

# Export validation (puede ser lento con muchos exports)
pnpm docs:validate
