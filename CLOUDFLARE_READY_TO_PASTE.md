# üöÄ Cloudflare Pages - Variables Listas para Copiar/Pegar

**Fecha:** 2025-10-04 08:00:00
**Estado:** ‚úÖ TODAS LAS CREDENCIALES COMPLETAS

---

## ‚ö° Quick Copy-Paste por App

### **1. Auth App** (`autamedica-auth`)

üîó **https://dash.cloudflare.com/*/pages/view/autamedica-auth/settings/environment-variables**

**Production Environment Variables:**

```bash
SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjI5Mjc5MCwiZXhwIjoyMDcxODY4NzkwfQ.zETc5W1OzznzfspXwd4zxA-ifW-aCKd9PGRneEs2IOk
NEXT_PUBLIC_SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
AUTH_COOKIE_DOMAIN=.autamedica.com
NEXT_PUBLIC_BASE_URL=https://auth.autamedica.com
```

---

### **2. Patients App** (`autamedica-patients`)

üîó **https://dash.cloudflare.com/*/pages/view/autamedica-patients/settings/environment-variables**

**Production Environment Variables:**

```bash
SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjI5Mjc5MCwiZXhwIjoyMDcxODY4NzkwfQ.zETc5W1OzznzfspXwd4zxA-ifW-aCKd9PGRneEs2IOk
NEXT_PUBLIC_SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
AUTH_COOKIE_DOMAIN=.autamedica.com
NEXT_PUBLIC_BASE_URL=https://patients.autamedica.com
NEXT_PUBLIC_AUTH_CALLBACK_URL=https://patients.autamedica.com/auth/callback
NEXT_PUBLIC_APP_URL=https://autamedica.com
NEXT_PUBLIC_PATIENTS_URL=https://patients.autamedica.com
NEXT_PUBLIC_DOCTORS_URL=https://doctors.autamedica.com
NEXT_PUBLIC_COMPANIES_URL=https://companies.autamedica.com
```

---

### **3. Doctors App** (`autamedica-doctors`)

üîó **https://dash.cloudflare.com/*/pages/view/autamedica-doctors/settings/environment-variables**

**Production Environment Variables:**

```bash
SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjI5Mjc5MCwiZXhwIjoyMDcxODY4NzkwfQ.zETc5W1OzznzfspXwd4zxA-ifW-aCKd9PGRneEs2IOk
NEXT_PUBLIC_SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
AUTH_COOKIE_DOMAIN=.autamedica.com
NEXT_PUBLIC_BASE_URL=https://doctors.autamedica.com
```

---

### **4. Companies App** (`autamedica-companies`)

üîó **https://dash.cloudflare.com/*/pages/view/autamedica-companies/settings/environment-variables**

**Production Environment Variables:**

```bash
SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjI5Mjc5MCwiZXhwIjoyMDcxODY4NzkwfQ.zETc5W1OzznzfspXwd4zxA-ifW-aCKd9PGRneEs2IOk
NEXT_PUBLIC_SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
AUTH_COOKIE_DOMAIN=.autamedica.com
NEXT_PUBLIC_BASE_URL=https://companies.autamedica.com
```

---

### **5. Admin App** (`autamedica-admin`)

üîó **https://dash.cloudflare.com/*/pages/view/autamedica-admin/settings/environment-variables**

**Production Environment Variables:**

```bash
SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjI5Mjc5MCwiZXhwIjoyMDcxODY4NzkwfQ.zETc5W1OzznzfspXwd4zxA-ifW-aCKd9PGRneEs2IOk
NEXT_PUBLIC_SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
AUTH_COOKIE_DOMAIN=.autamedica.com
NEXT_PUBLIC_BASE_URL=https://admin.autamedica.com
```

---

### **6. Web App** (`autamedica-web-app`)

üîó **https://dash.cloudflare.com/*/pages/view/autamedica-web-app/settings/environment-variables**

**Production Environment Variables:**

```bash
NEXT_PUBLIC_SUPABASE_URL=https://gtyvdircfhmdjiaelqkg.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0eXZkaXJjZmhtZGppYWVscWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTI3OTAsImV4cCI6MjA3MTg2ODc5MH0.7UFMVZsWTWOAynnhzkG76I_lhVCYtd_RmTt9EH3wJD4
AUTH_COOKIE_DOMAIN=.autamedica.com
NEXT_PUBLIC_BASE_URL=https://www.autamedica.com
```

---

## üìã Paso a Paso - Configuraci√≥n Cloudflare

### Por cada app:

1. **Abrir link** de la app (ver arriba)
2. Click en **"Settings"** (men√∫ izquierdo)
3. Click en **"Environment variables"**
4. Click en **"Production"** tab
5. Click en **"Edit variables"** (o "Add variable")
6. **Copiar/Pegar** TODAS las variables del bloque correspondiente
7. Click **"Save"**
8. Ir a **"Deployments"**
9. Click en **"..."** del √∫ltimo deployment
10. Click **"Retry deployment"** (para aplicar las nuevas variables)

---

## ‚úÖ Checklist de Configuraci√≥n

- [ ] **Auth App** - CR√çTICO (configurar primero)
- [ ] **Patients App** - Alta prioridad
- [ ] **Doctors App** - Alta prioridad
- [ ] **Companies App** - Media prioridad
- [ ] **Admin App** - Media prioridad
- [ ] **Web App** - Baja prioridad (solo public vars)

---

## üîê Seguridad de las Keys

### Keys P√∫blicas (NEXT_PUBLIC_*)
‚úÖ **Seguro exponer** - Van al cliente
- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `NEXT_PUBLIC_BASE_URL`

### Keys Privadas (Server-side)
üîí **NUNCA exponer** - Solo server-side
- `SUPABASE_SERVICE_ROLE_KEY` ‚ö†Ô∏è **MUY SENSIBLE**

**Cloudflare Pages maneja esto autom√°ticamente:**
- Variables sin `NEXT_PUBLIC_` ‚Üí Solo servidor
- Variables con `NEXT_PUBLIC_` ‚Üí Cliente y servidor

---

## üß™ Validaci√≥n Post-Configuraci√≥n

### Despu√©s de configurar TODAS las apps:

1. **Verificar Auth App:**
   ```bash
   curl https://auth.autamedica.com/auth/login
   # Debe retornar HTML (200 OK)
   ```

2. **Verificar Patients App:**
   ```bash
   curl https://patients.autamedica.com
   # Debe retornar HTML (200 OK) o redirect
   ```

3. **Test de Login Completo:**
   - Ir a: https://auth.autamedica.com/auth/login
   - Intentar login con Google
   - Verificar redirect a app correcta

---

## üìä Tiempo Estimado

- **Por app:** 2-3 minutos
- **Total (6 apps):** ~15 minutos
- **Redeploys:** 3-5 minutos por app (autom√°tico)

---

## ‚ö†Ô∏è Troubleshooting

### Si el redeploy falla:

1. Verificar que TODAS las variables est√°n configuradas
2. Verificar que no hay typos en los valores
3. Ver logs del deployment en Cloudflare:
   - Deployments ‚Üí Click en el deployment ‚Üí View logs

### Si la app no funciona despu√©s del deploy:

1. Verificar que `AUTH_COOKIE_DOMAIN` es `.autamedica.com` (con el punto)
2. Verificar que las URLs no tienen trailing slashes
3. Abrir DevTools ‚Üí Console para ver errores

---

## üéØ Resultado Esperado

Despu√©s de configurar TODO:

‚úÖ Auth centralizado funcionando
‚úÖ SSO entre subdominios (.autamedica.com)
‚úÖ Login/Logout funcionando
‚úÖ Callbacks OAuth funcionando
‚úÖ Session sync entre apps
‚úÖ Roles validados en backend (RPC)

---

**Generado:** 2025-10-04 08:00:00
**Git Watcher:** Activo (commitear√° este archivo autom√°ticamente)
